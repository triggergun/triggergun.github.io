{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[299],{1895:function(s,a,e){\"use strict\";e.r(a);var n=e(18),t=Object(n.a)({},(function(){var s=this,a=s._self._c;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"进阶5-分组查询\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#进阶5-分组查询\"}},[s._v(\"#\")]),s._v(\" #进阶5：分组查询\")]),s._v(\" \"),a(\"p\",[s._v(\"/*\\n语法：\")]),s._v(\" \"),a(\"p\",[s._v(\"select 查询列表\")]),s._v(\" \"),a(\"p\",[s._v(\"from 表\")]),s._v(\" \"),a(\"p\",[s._v(\"【where 筛选条件】\")]),s._v(\" \"),a(\"p\",[s._v(\"group by 分组的字段             【注意】 null 也能分组统计【结果】中会以“不确定”行（空行）的形式表现出来。\")]),s._v(\" \"),a(\"p\",[s._v(\"【order by 排序的字段】;\")]),s._v(\" \"),a(\"p\",[s._v(\"特点：\\n1、和分组函数一同查询的字段必须是group by后出现的字段\\n2、筛选分为两类：分组前筛选和分组后筛选\")]),s._v(\" \"),a(\"table\",[a(\"thead\",[a(\"tr\",[a(\"th\"),s._v(\" \"),a(\"th\",[s._v(\"数据源\")]),s._v(\" \"),a(\"th\",[s._v(\"位置\")]),s._v(\" \"),a(\"th\",[s._v(\"关键字\")])])]),s._v(\" \"),a(\"tbody\",[a(\"tr\",[a(\"td\",[s._v(\"分组前筛选\")]),s._v(\" \"),a(\"td\",[s._v(\"原始表\")]),s._v(\" \"),a(\"td\",[s._v(\"group by子句的前面\")]),s._v(\" \"),a(\"td\",[s._v(\"where\")])]),s._v(\" \"),a(\"tr\",[a(\"td\",[s._v(\"分组后筛选\")]),s._v(\" \"),a(\"td\",[s._v(\"分组后的结果集\")]),s._v(\" \"),a(\"td\",[s._v(\"group by子句的后面\")]),s._v(\" \"),a(\"td\",[s._v(\"having\")])])])]),s._v(\" \"),a(\"h5\",{attrs:{id:\"结论-分组函数做条件一定是放在having子句中\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#结论-分组函数做条件一定是放在having子句中\"}},[s._v(\"#\")]),s._v(\" 结论：分组函数做条件一定是放在having子句中\")]),s._v(\" \"),a(\"p\",[s._v(\"问题1：分组函数做筛选能不能放在where后面\\n答：不能\")]),s._v(\" \"),a(\"p\",[s._v(\"问题2：where——group by——having\")]),s._v(\" \"),a(\"p\",[s._v(\"一般来讲，能用分组前筛选的，尽量使用分组前筛选，提高效率\")]),s._v(\" \"),a(\"p\",[s._v(\"3、分组可以按单个字段也可以按多个字段\\n4、可以搭配着排序使用\")]),s._v(\" \"),a(\"p\",[s._v(\"*/\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"引入-查询每个部门的员工个数\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#引入-查询每个部门的员工个数\"}},[s._v(\"#\")]),s._v(\" #引入：查询每个部门的员工个数\")]),s._v(\" \"),a(\"p\",[s._v(\"SELECT COUNT(*) FROM employees WHERE department_id=90;\\n#1.简单的分组\")]),s._v(\" \"),a(\"p\",[s._v(\"#案例1：查询每个工种的员工平均工资\\nSELECT AVG(salary),job_id\\nFROM employees\\nGROUP BY job_id;\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"案例2-查询每个位置的部门个数\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#案例2-查询每个位置的部门个数\"}},[s._v(\"#\")]),s._v(\" #案例2：查询每个位置的部门个数\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"SELECT COUNT(*),location_id\\nFROM departments\\nGROUP BY location_id;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"_2、可以实现分组前的筛选\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、可以实现分组前的筛选\"}},[s._v(\"#\")]),s._v(\" #2、可以实现分组前的筛选\")]),s._v(\" \"),a(\"p\",[s._v(\"#案例1：查询邮箱中包含a字符的 每个部门的平均工资\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"SELECT AVG(salary),department_id\\nFROM employees\\nWHERE email LIKE '%a%'\\nGROUP BY department_id;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\")])]),a(\"p\",[s._v(\"#案例2：查询有奖金的每个领导手下员工的最高工资\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"SELECT MAX(salary),manager_id\\nFROM employees\\nWHERE commission_pct IS NOT NULL\\nGROUP BY manager_id;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"_3、分组后筛选\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3、分组后筛选\"}},[s._v(\"#\")]),s._v(\" #3、分组后筛选\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"案例-查询哪个部门的员工个数-5\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#案例-查询哪个部门的员工个数-5\"}},[s._v(\"#\")]),s._v(\" #案例：查询哪个部门的员工个数>5\")]),s._v(\" \"),a(\"p\",[s._v(\"#①查询每个部门的员工个数\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"SELECT COUNT(*),department_id\\nFROM employees\\nGROUP BY department_id;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\")])]),a(\"p\",[s._v(\"#② 根据①的结果进行筛选，查询哪个部门的员工个数>5\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"SELECT COUNT(*),department_id\\nFROM employees\\n\\nGROUP BY department_id\\n\\nHAVING COUNT(*)>5;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\")])]),a(\"h4\",{attrs:{id:\"案例2-每个工种有奖金的员工的最高工资-12000的工种编号和最高工资\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#案例2-每个工种有奖金的员工的最高工资-12000的工种编号和最高工资\"}},[s._v(\"#\")]),s._v(\" #案例2：每个工种有奖金的员工的最高工资>12000的工种编号和最高工资\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"SELECT job_id,MAX(salary)\\nFROM employees\\nWHERE commission_pct IS NOT NULL\\nGROUP BY job_id\\nHAVING MAX(salary)>12000;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"h4\",{attrs:{id:\"案例3-领导编号-102的每个领导手下的最低工资大于5000的领导编号和最低工资\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#案例3-领导编号-102的每个领导手下的最低工资大于5000的领导编号和最低工资\"}},[s._v(\"#\")]),s._v(\" #案例3：领导编号>102的每个领导手下的最低工资大于5000的领导编号和最低工资\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"manager_id>102\\n\\nSELECT manager_id,MIN(salary)\\nFROM employees\\nGROUP BY manager_id\\n\\n#3、添加筛选条件：最低工资>5000\\n\\nHAVING MIN(salary)>5000;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"表达式-或-函数分组\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#表达式-或-函数分组\"}},[s._v(\"#\")]),s._v(\" 表达式  或 函数分组\")]),s._v(\" \"),a(\"p\",[s._v(\"案例：\")]),s._v(\" \"),a(\"p\",[s._v(\"按员工姓名的长度分组，查询每一组的员工个数，筛选员工个数>5的有哪些？\")]),s._v(\" \"),a(\"p\",[s._v(\"1、查询每个长度的员工个数\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"select count(*), length(last_name) as len_name\\n\\nfrom employees\\n\\ngroup by length(last_name);\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"p\",[s._v(\"2、添加查询条件\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"select count(*), length(last_name) as len_name\\n\\nfrom employees\\n\\ngroup by length(last_name)\\n\\nhaving count(*)>5;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"_4-添加排序\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-添加排序\"}},[s._v(\"#\")]),s._v(\" #4.添加排序\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"案例-每个工种有奖金的员工的最高工资-6000的工种编号和最高工资-按最高工资升序\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#案例-每个工种有奖金的员工的最高工资-6000的工种编号和最高工资-按最高工资升序\"}},[s._v(\"#\")]),s._v(\" #案例：每个工种有奖金的员工的最高工资>6000的工种编号和最高工资,按最高工资升序\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"SELECT job_id,MAX(salary) m\\nFROM employees\\nWHERE commission_pct IS NOT NULL\\nGROUP BY job_id\\nHAVING m>6000\\nORDER BY m ;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\")])]),a(\"p\",[s._v(\"#案例：查询每个部门每个工种的员工的   平均工资, 并且按平均工资的高低显示\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"select avg(salary), department_id,job_id\\n\\nfrom employees\\n\\ngroup by job_id, department_id;\\norder by avg(salary) desc;         -- 降序\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"_5-按多个字段分组\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-按多个字段分组\"}},[s._v(\"#\")]),s._v(\" #5.按多个字段分组\")]),s._v(\" \"),a(\"h4\",{attrs:{id:\"案例-查询每个部门每个工种的员工的-平均工资\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#案例-查询每个部门每个工种的员工的-平均工资\"}},[s._v(\"#\")]),s._v(\" #案例：查询每个部门每个工种的员工的   平均工资\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"select avg(salary), department_id,job_id\\n\\nfrom employees\\n\\ngroup by job_id, department_id;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\")])]),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"SELECT MIN(salary),job_id,department_id\\nFROM employees\\nGROUP BY department_id,job_id\\nORDER BY MIN(salary) DESC;\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\")])]),a(\"h1\",{attrs:{id:\"【案例讲解】分组查询\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#【案例讲解】分组查询\"}},[s._v(\"#\")]),s._v(\" 【案例讲解】分组查询\")]),s._v(\" \"),a(\"h1\",{attrs:{id:\"作业day02-file\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#作业day02-file\"}},[s._v(\"#\")]),s._v(\" 作业day02 file\")])])}),[],!1,null,null,null);a.default=t.exports}}]);","extractedComments":[]}