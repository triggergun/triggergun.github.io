{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{1629:function(s,a,e){s.exports=e.p+\"assets/img/image-20250228162057176.874eae5f.png\"},1630:function(s,a,e){s.exports=e.p+\"assets/img/image-20250228163900738.21f087ce.png\"},1631:function(s,a,e){s.exports=e.p+\"assets/img/image-20250228164854682.40eeb190.png\"},1632:function(s,a,e){s.exports=e.p+\"assets/img/image-20250228165240805.aa721c66.png\"},2168:function(s,a,e){\"use strict\";e.r(a);var t=e(18),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"向harbor上传自定义镜像\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#向harbor上传自定义镜像\"}},[s._v(\"#\")]),s._v(\" 向Harbor上传自定义镜像\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"新建项目\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#新建项目\"}},[s._v(\"#\")]),s._v(\" 新建项目\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:e(1629),alt:\"image-20250228162057176\"}})]),s._v(\" \"),a(\"p\",[s._v(\"公开的特点：上传镜像是要用户名与密码的。用户去拉取是不需要用户密码的。\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"上传镜像到仓库\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#上传镜像到仓库\"}},[s._v(\"#\")]),s._v(\" 上传镜像到仓库\")]),s._v(\" \"),a(\"p\",[s._v(\"查看下/etc/docker/daemon.json文件\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"vi /etc/docker/daemon.json\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[s._v(\"在目标服务器上配置如下：\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v('cat > /etc/docker/daemon.json <<-\\'EOF\\'\\n{\\n    \"registry-mirrors\": [\\n        \"https://<changme>.mirror.aliyuncs.com\",\\n        \"https://dockerproxy.com\",\\n        \"https://mirror.baidubce.com\",\\n        \"https://docker.m.daocloud.io\",\\n        \"https://docker.nju.edu.cn\",\\n        \"https://docker.mirrors.sjtug.sjtu.edu.cn\"\\n     ],\\n    \"insecure-registries\": [\"192.168.5.203:80\"]\\n}\\nEOF\\n')])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),a(\"br\")])]),a(\"p\",[s._v(\"192.168.5.203是harbor的地址\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"systemctl daemon-reload\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"systemctl restart docker\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"镜像名字书写规范\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#镜像名字书写规范\"}},[s._v(\"#\")]),s._v(\" 镜像名字书写规范\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"docker tag 8245fa381be8 192.168.5.203:80/public/myproject:1.0\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[s._v(\"docker tag 96e09ccfbe21 192.168.31.232:80/项目的名字/myproject:1.0(镜像名字)\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:e(1630),alt:\"image-20250228163900738\"}})]),s._v(\" \"),a(\"p\",[s._v(\"在目标服务器上上传构建的镜像\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"docker login -u admin -p Harbor12345 192.168.5.203:80\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"ul\",[a(\"li\",[s._v(\"-u: 后面接用户名\")]),s._v(\" \"),a(\"li\",[s._v(\"-p: 后面接密码\")]),s._v(\" \"),a(\"li\",[s._v(\"192.168.5.203:80 表示 harbor地址\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"[root@localhost ~]# docker login -u admin -p Harbor12345 192.168.5.203:80\\nWARNING! Using --password via the CLI is insecure. Use --password-stdin.\\nWARNING! Your password will be stored unencrypted in /root/.docker/config.json.\\nConfigure a credential helper to remove this warning. See\\nhttps://docs.docker.com/engine/reference/commandline/login/#credentials-store\\n\\nLogin Succeeded\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\")])]),a(\"div\",{staticClass:\"custom-block tip\"},[a(\"p\",{staticClass:\"custom-block-title\"},[s._v(\"密码怎么修改?\")]),s._v(\" \"),a(\"p\",[s._v(\"答:可以去harbor的后台界面去修改这个用户名字对应的密码\")])]),s._v(\" \"),a(\"p\",[s._v(\"推送镜像到仓库\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"docker push 192.168.5.203:80/public/myproject:1.0\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[s._v(\"执行推送的结果:\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"[root@localhost ~]# docker push 192.168.5.203:80/public/myproject:1.0\\nThe push refers to repository [192.168.5.203:80/public/myproject]\\n5e2d267ba363: Pushed \\n5f70bf18a086: Pushed \\nb66078cf4b41: Pushed \\ncd5a0a9f1e01: Pushed \\neafe6e032dbd: Pushed \\n92a4e8a3140f: Pushed \\n1.0: digest: sha256:d01646c2b7bedbaa8b5ec8bfd1b82414ff9f72b1e769fe46db9a412455b58a6d size: 1577\\n[root@localhost ~]# \\n\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"验证是否推送成功\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#验证是否推送成功\"}},[s._v(\"#\")]),s._v(\" 验证是否推送成功\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:e(1631),alt:\"image-20250228164854682\"}})]),s._v(\" \"),a(\"h2\",{attrs:{id:\"拉取镜像实验\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#拉取镜像实验\"}},[s._v(\"#\")]),s._v(\" 拉取镜像实验\")]),s._v(\" \"),a(\"p\",[s._v(\"拉取镜像命令:\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"docker pull 192.168.5.203:80/public/myproject:1.0\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[s._v(\"拉取日志:\")]),s._v(\" \"),a(\"div\",{staticClass:\"language- line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[s._v(\"[root@localhost ~]# docker pull 192.168.5.203:80/public/myproject:1.0\\n1.0: Pulling from public/myproject\\n1efc276f4ff9: Already exists \\na2f2f93da482: Already exists \\n1a2de4cc9431: Already exists \\nd2421c7a4bbf: Already exists \\n4f4fb700ef54: Already exists \\n03a90c0a7153: Already exists \\nDigest: sha256:d01646c2b7bedbaa8b5ec8bfd1b82414ff9f72b1e769fe46db9a412455b58a6d\\nStatus: Downloaded newer image for 192.168.5.203:80/public/myproject:1.0\\n192.168.5.203:80/public/myproject:1.0\\n\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),a(\"br\")])]),a(\"p\",[s._v(\"拉取结果:\")]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:e(1632),alt:\"image-20250228165240805\"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);","extractedComments":[]}