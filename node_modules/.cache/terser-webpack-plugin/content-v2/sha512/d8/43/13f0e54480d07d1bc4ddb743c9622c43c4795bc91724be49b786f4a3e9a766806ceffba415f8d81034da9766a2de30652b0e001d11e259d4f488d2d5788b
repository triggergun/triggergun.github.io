{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[349],{2074:function(t,e,l){\"use strict\";l.r(e);var v=l(18),_=Object(v.a)({},(function(){var t=this,e=t._self._c;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[e(\"h1\",{attrs:{id:\"mysql的事务隔离级别\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#mysql的事务隔离级别\"}},[t._v(\"#\")]),t._v(\" MySql的事务隔离级别\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"为什么有事务隔离级别\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#为什么有事务隔离级别\"}},[t._v(\"#\")]),t._v(\" 为什么有事务隔离级别？\")]),t._v(\" \"),e(\"p\",[t._v(\"为什么有Mysql有事务的隔离级别？\")]),t._v(\" \"),e(\"p\",[t._v(\"就像共享文档的\"),e(\"strong\",[t._v(\"协作模式选择\")]),t._v(\"：\")]),t._v(\" \"),e(\"ol\",[e(\"li\",[e(\"strong\",[t._v(\"所有人都能看到草稿\")]),t._v(\"（读未提交） → 快但乱\")]),t._v(\" \"),e(\"li\",[e(\"strong\",[t._v(\"只能看到已保存的内容\")]),t._v(\"（读已提交） → 平衡选择\")]),t._v(\" \"),e(\"li\",[e(\"strong\",[t._v(\"给你文档的截图\")]),t._v(\"（可重复读） → 稳定一致\")]),t._v(\" \"),e(\"li\",[e(\"strong\",[t._v(\"锁定文档，一个人改完下一个\")]),t._v(\"（串行化） → 最安全但最慢\")])]),t._v(\" \"),e(\"p\",[t._v(\"原因：\"),e(\"strong\",[t._v(\"根本矛盾：隔离 vs 并发\")])]),t._v(\" \"),e(\"p\",[t._v(\"数据库系统面临一个\"),e(\"strong\",[t._v(\"根本性的技术矛盾\")]),t._v(\"：\")]),t._v(\" \"),e(\"ul\",[e(\"li\",[e(\"strong\",[t._v(\"强隔离性\")]),t._v(\"：保证事务看到一致的数据视图，避免并发异常。\")]),t._v(\" \"),e(\"li\",[e(\"strong\",[t._v(\"高并发性\")]),t._v(\"：允许多个事务同时执行，提升系统吞吐量。\")])]),t._v(\" \"),e(\"p\",[e(\"strong\",[t._v(\"隔离级别就是解决这个矛盾的标准化方案。\")])]),t._v(\" \"),e(\"h2\",{attrs:{id:\"事务的隔离级别\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#事务的隔离级别\"}},[t._v(\"#\")]),t._v(\" 事务的隔离级别\")]),t._v(\" \"),e(\"p\",[t._v(\"事务的隔离级别有哪几种？实现机制是什么？\")]),t._v(\" \"),e(\"table\",[e(\"thead\",[e(\"tr\",[e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"隔离级别\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"英文\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"脏读\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"不可重复读\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"幻读\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"核心实现机制\")]),t._v(\" \"),e(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"MySQL具体实现\")])])]),t._v(\" \"),e(\"tbody\",[e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"strong\",[t._v(\"读未提交\")])]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"Read Uncommitted\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"❌ 可能发生\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"❌ 可能发生\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"❌ 可能发生\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"strong\",[t._v(\"无隔离控制\")]),t._v(\" • 直接读取最新数据页 • 无MVCC版本检查 • 无读锁\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"• 直接读取内存中最新的数据版本 • 忽略Undo Log中的旧版本 • 性能最高，一致性最差\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"strong\",[t._v(\"读已提交\")])]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"Read Committed\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"✅ 防止\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"❌ 可能发生\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"❌ 可能发生\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"strong\",[t._v(\"语句级快照\")]),t._v(\" • 每条SQL开始时创建快照 • 读取已提交的数据版本 • 使用行锁防止脏写\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"• \"),e(\"strong\",[t._v(\"MVCC + Undo Log\")]),t._v(\" • 每条SELECT都生成新的Read View • 只读取已提交的事务版本 • 使用记录锁(Record Lock)\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"strong\",[t._v(\"可重复读\")])]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"Repeatable Read\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"✅ 防止\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"✅ 防止\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"⚠️ 部分防止*\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"strong\",[t._v(\"事务级快照\")]),t._v(\" • 事务开始时创建快照 • 整个事务使用同一快照 • 间隙锁防止部分幻读\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"• \"),e(\"strong\",[t._v(\"MVCC + Undo Log + 间隙锁\")]),t._v(\" • 事务第一次SELECT时生成Read View • 使用间隙锁(Gap Lock)和临键锁(Next-Key Lock) • MySQL默认级别\")])]),t._v(\" \"),e(\"tr\",[e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"strong\",[t._v(\"串行化\")])]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"Serializable\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"✅ 防止\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"✅ 防止\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"✅ 防止\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[e(\"strong\",[t._v(\"完全串行化执行\")]),t._v(\" • 所有读取加共享锁 • 严格的锁协议 • 事务完全串行执行\")]),t._v(\" \"),e(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"• \"),e(\"strong\",[t._v(\"自动锁升级\")]),t._v(\" • 普通SELECT自动转为SELECT ... LOCK IN SHARE MODE • 使用范围锁和表锁 • 性能最差，一致性最强\")])])])])])}),[],!1,null,null,null);e.default=_.exports}}]);","extractedComments":[]}