{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[407],{2174:function(a,t,n){\"use strict\";n.r(t);var r=n(18),i=Object(r.a)({},(function(){var a=this,t=a._self._c;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":a.$parent.slotKey}},[t(\"h1\",{attrs:{id:\"spring事务处理的核心流程\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#spring事务处理的核心流程\"}},[a._v(\"#\")]),a._v(\" Spring事务处理的核心流程\")]),a._v(\" \"),t(\"p\",[a._v(\"Spring事务处理的核心流程涉及以下几个关键组件：\")]),a._v(\" \"),t(\"h2\",{attrs:{id:\"_1-主要关注的核心类\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-主要关注的核心类\"}},[a._v(\"#\")]),a._v(\" 1. 主要关注的核心类\")]),a._v(\" \"),t(\"p\",[t(\"code\",[a._v(\"Transactional\")]),a._v(\" - @Transactional注解定义类 \"),t(\"code\",[a._v(\"TransactionAspectSupport\")]),a._v(\" - 事务切面支持基类 \"),t(\"code\",[a._v(\"TransactionInterceptor\")]),a._v(\" - 事务拦截器 \"),t(\"code\",[a._v(\"AnnotationTransactionAttributeSource\")]),a._v(\" - 注解事务属性源 \"),t(\"code\",[a._v(\"SpringTransactionAnnotationParser\")]),a._v(\" - Spring事务注解解析器\")]),a._v(\" \"),t(\"h2\",{attrs:{id:\"_2-关键断点设置位置-注解解析阶段断点\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-关键断点设置位置-注解解析阶段断点\"}},[a._v(\"#\")]),a._v(\" 2. 关键断点设置位置 注解解析阶段断点：\")]),a._v(\" \"),t(\"ul\",[t(\"li\",[t(\"code\",[a._v(\"SpringTransactionAnnotationParser.java\")]),a._v(\" - parseTransactionAnnotation 方法\")]),a._v(\" \"),t(\"li\",[t(\"code\",[a._v(\"AnnotationTransactionAttributeSource.java\")]),a._v(\" - determineTransactionAttribute 方法 事务拦截阶段断点：\")]),a._v(\" \"),t(\"li\",[t(\"code\",[a._v(\"TransactionInterceptor.java\")]),a._v(\" - invoke 方法\")]),a._v(\" \"),t(\"li\",[t(\"code\",[a._v(\"TransactionAspectSupport.java\")]),a._v(\" - invokeWithinTransaction 方法（核心方法） 事务管理阶段断点：\")]),a._v(\" \"),t(\"li\",[t(\"code\",[a._v(\"PlatformTransactionManager.java\")]),a._v(\" - getTransaction 、 commit 、 rollback 方法\")]),a._v(\" \"),t(\"li\",[t(\"code\",[a._v(\"AbstractPlatformTransactionManager.java\")]),a._v(\" - 具体的事务管理实现\")])]),a._v(\" \"),t(\"h2\",{attrs:{id:\"_3-调试步骤和策略\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-调试步骤和策略\"}},[a._v(\"#\")]),a._v(\" 3. 调试步骤和策略\")]),a._v(\" \"),t(\"p\",[t(\"strong\",[a._v(\"第1步：设置关键断点\")])]),a._v(\" \"),t(\"p\",[a._v(\"在IDE中设置以下关键断点：\")]),a._v(\" \"),t(\"ol\",[t(\"li\",[a._v(\"TransactionAspectSupport.invokeWithinTransaction - 事务方法调用的入口\")]),a._v(\" \"),t(\"li\",[a._v(\"TransactionInterceptor.invoke - AOP拦截器入口\")]),a._v(\" \"),t(\"li\",[a._v(\"AbstractPlatformTransactionManager.getTransaction - 事务获取逻辑\")]),a._v(\" \"),t(\"li\",[a._v(\"AbstractPlatformTransactionManager.processCommit - 事务提交逻辑\")]),a._v(\" \"),t(\"li\",[a._v(\"AbstractPlatformTransactionManager.processRollback - 事务回滚逻辑\")])]),a._v(\" \"),t(\"p\",[t(\"strong\",[a._v(\"第2步：调试流程\")])]),a._v(\" \"),t(\"ol\",[t(\"li\",[a._v(\"启动调试 ：以调试模式启动应用\")]),a._v(\" \"),t(\"li\",[a._v(\"触发事务 ：调用testTransactionalMethod方法\")]),a._v(\" \"),t(\"li\",[a._v(\"跟踪调用栈 ：\\n\"),t(\"ul\",[t(\"li\",[a._v(\"TransactionInterceptor.invoke (AOP拦截)\")]),a._v(\" \"),t(\"li\",[a._v(\"TransactionAspectSupport.invokeWithinTransaction (事务切面处理)\")]),a._v(\" \"),t(\"li\",[a._v(\"创建TransactionInfo对象\")]),a._v(\" \"),t(\"li\",[a._v(\"调用PlatformTransactionManager.getTransaction获取事务\")]),a._v(\" \"),t(\"li\",[a._v(\"执行业务方法\")]),a._v(\" \"),t(\"li\",[a._v(\"根据执行结果提交或回滚事务\")])])])]),a._v(\" \"),t(\"h2\",{attrs:{id:\"_4-重点关注的事务处理阶段4阶段\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4-重点关注的事务处理阶段4阶段\"}},[a._v(\"#\")]),a._v(\" 4. 重点关注的事务处理阶段4阶段\")]),a._v(\" \"),t(\"p\",[a._v(\"阶段1：注解解析\")]),a._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[a._v(\"断点位置 ：SpringTransactionAnnotationParser.parseTransactionAnnotation\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"关注内容 ：如何将@Transactional注解属性转换为TransactionAttribute\")])])]),a._v(\" \"),t(\"p\",[a._v(\"阶段2：事务创建\")]),a._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[a._v(\"断点位置 ：AbstractPlatformTransactionManager.getTransaction\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"关注内容 ：事务传播行为的处理、事务同步器的注册\")])])]),a._v(\" \"),t(\"p\",[a._v(\"阶段3：方法执行\")]),a._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[a._v(\"断点位置 ：TransactionAspectSupport.invokeWithinTransaction中的方法调用部分\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"关注内容 ：业务方法在事务上下文中的执行\")])])]),a._v(\" \"),t(\"p\",[a._v(\"阶段4：事务完成\")]),a._v(\" \"),t(\"ul\",[t(\"li\",[t(\"p\",[a._v(\"断点位置 ：AbstractPlatformTransactionManager.processCommit/processRollback\")])]),a._v(\" \"),t(\"li\",[t(\"p\",[a._v(\"关注内容 ：事务提交/回滚的具体逻辑\")])])]),a._v(\" \"),t(\"h2\",{attrs:{id:\"_5-调试技巧和注意事项\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5-调试技巧和注意事项\"}},[a._v(\"#\")]),a._v(\" 5. 调试技巧和注意事项\")]),a._v(\" \"),t(\"ol\",[t(\"li\",[a._v(\"使用条件断点 ：在TransactionAspectSupport.invokeWithinTransaction方法中设置条件断点，只针对特定方法名进行调试\")]),a._v(\" \"),t(\"li\",[a._v(\"观察TransactionInfo对象 ：关注transactionInfoHolder中的TransactionInfo状态变化\")]),a._v(\" \"),t(\"li\",[a._v(\"跟踪事务状态 ：使用TransactionSynchronizationManager观察当前线程的事务状态\")]),a._v(\" \"),t(\"li\",[a._v(\"注意事务传播行为 ：调试时特别注意不同传播行为（REQUIRED、REQUIRES_NEW等）的处理差异\\n通过以上调试策略，你可以深入理解Spring事务处理的完整流程，包括注解解析、AOP拦截、事务管理、资源同步等关键环节\")])])])}),[],!1,null,null,null);t.default=i.exports}}]);","extractedComments":[]}