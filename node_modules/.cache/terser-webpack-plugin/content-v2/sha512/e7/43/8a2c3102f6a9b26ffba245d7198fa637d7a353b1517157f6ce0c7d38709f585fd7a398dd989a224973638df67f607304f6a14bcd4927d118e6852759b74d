{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[377],{2128:function(t,s,a){\"use strict\";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[s(\"h2\",{attrs:{id:\"事务传播行为对比表解析\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#事务传播行为对比表解析\"}},[t._v(\"#\")]),t._v(\" 事务传播行为对比表解析\")]),t._v(\" \"),s(\"h2\",{attrs:{id:\"_1-什么是-当前有事务\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1-什么是-当前有事务\"}},[t._v(\"#\")]),t._v(' 1. 什么是\"当前有事务\"')]),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"意思是\")]),t._v(\"：在调用这个方法的时候，\"),s(\"strong\",[t._v(\"已经有一个事务在运行了\")])]),t._v(\" \"),s(\"div\",{staticClass:\"language- line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v('@Transactional\\npublic void 主方法() {\\n    // 这里已经开始了一个事务\\n    \\n    子方法();  // 调用子方法时，\"当前有事务\" ✅\\n}\\n\\npublic void 子方法() {\\n    // 当被主方法调用时，这里\"当前有事务\"\\n}\\n')])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),s(\"br\")])]),s(\"h2\",{attrs:{id:\"_2-什么是-当前无事务\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-什么是-当前无事务\"}},[t._v(\"#\")]),t._v(' 2. 什么是**\"当前无事务\"**')]),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"意思是\")]),t._v(\"：在调用这个方法的时候，\"),s(\"strong\",[t._v(\"没有事务在运行\")])]),t._v(\" \"),s(\"div\",{staticClass:\"language- line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v('public void 普通方法() {\\n    // 这里没有 @Transactional 注解\\n    \\n    子方法();  // 调用子方法时，\"当前无事务\" ✅\\n}\\n')])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\")])]),s(\"h2\",{attrs:{id:\"_3-典型场景\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3-典型场景\"}},[t._v(\"#\")]),t._v(' 3. \"典型场景\"')]),t._v(\" \"),s(\"p\",[t._v(\"这个就不用多说：\")]),t._v(\" \"),s(\"p\",[s(\"strong\",[t._v(\"意思就是\")]),t._v(\"：这种传播行为最适合用在什么情况下。\")]),t._v(\" \"),s(\"hr\"),t._v(\" \"),s(\"h2\",{attrs:{id:\"重新解释的表格-用生活例子\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#重新解释的表格-用生活例子\"}},[t._v(\"#\")]),t._v(\" 重新解释的表格（用生活例子）\")]),t._v(\" \"),s(\"table\",[s(\"thead\",[s(\"tr\",[s(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"传播行为\")]),t._v(\" \"),s(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"当前有事务（有人排队）\")]),t._v(\" \"),s(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"当前无事务（没人排队）\")]),t._v(\" \"),s(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"你该怎么行动？\")]),t._v(\" \"),s(\"th\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"生活例子\")])])]),t._v(\" \"),s(\"tbody\",[s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"REQUIRED\")]),t._v(\" （需要）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"插队进去 （加入别人的队）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"自己开个新队（新创建一个事务）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"最常用\")]),t._v(\"，大家都这样做\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"食堂打饭：有队就排，没队就开新队\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"REQUIRES_NEW\")]),t._v(\" （必须新）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"到旁边开个新队 （让别人先等着）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"自己开个新队\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"独立的事\")]),t._v(\"，不受别人影响\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"买票时突然要上厕所：先离队去厕所，回来重新排队\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"NESTED\")]),t._v(\" （嵌套）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"在队伍里做个标记 （可以单独退回标记点）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"自己开个新队\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"大任务里的小任务\")]),t._v(\" 失败不影响整体\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"买套餐：主餐+饮料+甜点 饮料没了只退饮料钱\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"SUPPORTS\")]),t._v(\" （支持）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"跟着排队\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"不排队了\")]),t._v(\" 直接办事\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"可排队可不排队\")]),t._v(\"的事\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"问路：如果别人在排队就问下，没排队就直接问\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"NOT_SUPPORTED\")]),t._v(\" （不支持）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"不排队了\")]),t._v(\" 让队伍等着\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"不排队\")])]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"长时间的事\")]),t._v(\" 别占着队伍\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"办护照要1小时：让其他人先办，你单独处理\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"NEVER\")]),t._v(\" （绝不允许）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"大喊：不行！\")]),t._v(\" （抛异常）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"不排队\")])]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"绝不能排队的事\")])]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"火灾逃生：绝不能排队！排队就危险！\")])]),t._v(\" \"),s(\"tr\",[s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"MANDATORY\")]),t._v(\" （强制）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"跟着排队\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"大喊：不行！\")]),t._v(\" （抛异常）\")]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[s(\"strong\",[t._v(\"必须排队的事\")])]),t._v(\" \"),s(\"td\",{staticStyle:{\"text-align\":\"left\"}},[t._v(\"银行取大额现金：必须排队办理，不能插队\")])])])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"场景1-required-最常用\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#场景1-required-最常用\"}},[t._v(\"#\")]),t._v(\" 场景1：REQUIRED（最常用）\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Service\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" 订单服务 \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Transactional\")]),t._v(\"  \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 默认就是 REQUIRED\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" 创建订单\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 开始排队（新建事务）\")]),t._v(\"\\n        保存订单\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n        扣库存\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 也在同一个队伍里\")]),t._v(\"\\n        发短信\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 也在同一个队伍里\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 一起提交或一起回滚\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),s(\"br\")])]),s(\"h2\",{attrs:{id:\"场景2-requires-new-独立的事\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#场景2-requires-new-独立的事\"}},[t._v(\"#\")]),t._v(\" 场景2：REQUIRES_NEW（独立的事）\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Service\")]),t._v(\"  \\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" 日志服务 \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Transactional\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"propagation \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Propagation\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"REQUIRES_NEW\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" 记录日志\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 不管别人在不在排队，我都要新开一个队\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 我自己的事办完就提交，不受别人影响\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Transactional\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" 下订单\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    保存订单\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"  \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 主队伍\")]),t._v(\"\\n    \\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 日志必须独立保存，就算订单失败也要记录\")]),t._v(\"\\n    日志服务\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"记录日志\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"  \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 开新队伍\")]),t._v(\"\\n    \\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 如果这里出错，订单回滚，但日志已经保存\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"17\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"18\")]),s(\"br\")])]),s(\"h2\",{attrs:{id:\"场景3-nested-套餐里的单品\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#场景3-nested-套餐里的单品\"}},[t._v(\"#\")]),t._v(\" 场景3：NESTED（套餐里的单品）\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Transactional\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" 批量导入员工\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"员工 \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":\")]),t._v(\" 员工列表\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"try\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            导入单个员工\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"员工\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"  \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// NESTED：套餐里的单品\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"catch\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Exception\")]),t._v(\" e\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 这个人导入失败，继续导入下一个\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 只回滚这个人的操作\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 所有人导入成功才一起提交\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Transactional\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"propagation \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Propagation\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"NESTED\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" 导入单个员工\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"员工\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 如果失败，只回滚这个员工的操作\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 不影响其他人\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"17\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"18\")]),s(\"br\")])]),s(\"h2\",{attrs:{id:\"场景4-supports-看情况\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#场景4-supports-看情况\"}},[t._v(\"#\")]),t._v(\" 场景4：SUPPORTS（看情况）\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Transactional\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"propagation \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Propagation\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"SUPPORTS\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" 报表 生成报表\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 生成报表（查询操作）\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 如果别人在事务中调用我，我就用他的事务\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 如果别人不在事务中调用，我就不用事务\")]),t._v(\"\\n    \\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 适合：查询接口，可事务可非事务\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\")])]),s(\"h2\",{attrs:{id:\"场景5-not-supported-别占着队伍\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#场景5-not-supported-别占着队伍\"}},[t._v(\"#\")]),t._v(\" 场景5：NOT_SUPPORTED（别占着队伍）\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Transactional\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"propagation \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Propagation\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"NOT_SUPPORTED\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"  \\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" 导出\"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Excel\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 导出10万条数据到Excel（耗时5分钟）\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 如果别人有事务，先挂起，让我先办\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 办完了再恢复别人的事务\")]),t._v(\"\\n    \\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 适合：长时间操作，避免锁表太久\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\")])]),s(\"h2\",{attrs:{id:\"场景6-never-严禁排队\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#场景6-never-严禁排队\"}},[t._v(\"#\")]),t._v(\" 场景6：NEVER（严禁排队）\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Transactional\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"propagation \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Propagation\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"NEVER\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" 健康检查\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 检查数据库连接是否正常\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 绝对不能在有事务时调用！\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 否则抛异常：IllegalTransactionStateException\")]),t._v(\"\\n    \\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 适合：监控、健康检查\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\")])]),s(\"h2\",{attrs:{id:\"场景7-mandatory-必须排队\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#场景7-mandatory-必须排队\"}},[t._v(\"#\")]),t._v(\" 场景7：MANDATORY（必须排队）\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-java line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@Transactional\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"propagation \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"Propagation\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token constant\"}},[t._v(\"MANDATORY\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" 审计记录\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 记录谁在什么时候做了什么\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 必须和业务操作在同一个事务中！\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 如果没事务就抛异常\")]),t._v(\"\\n    \\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 适合：审计日志，必须原子性\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\")])]),s(\"hr\"),t._v(\" \"),s(\"h2\",{attrs:{id:\"简单选择指南\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#简单选择指南\"}},[t._v(\"#\")]),t._v(\" 简单选择指南\")]),t._v(\" \"),s(\"p\",[t._v(\"问自己几个问题：\")]),t._v(\" \"),s(\"ol\",[s(\"li\",[s(\"strong\",[t._v(\"这个方法需要事务吗？\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"strong\",[t._v(\"需要\")]),t._v(\" → 用 \"),s(\"code\",[t._v(\"REQUIRED\")]),t._v(\"（默认）\")]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"不需要\")]),t._v(\" → 考虑 \"),s(\"code\",[t._v(\"NOT_SUPPORTED\")]),t._v(\" 或 \"),s(\"code\",[t._v(\"NEVER\")])]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"看情况\")]),t._v(\" → \"),s(\"code\",[t._v(\"SUPPORTS\")])])])]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"这个方法失败时，要不要影响调用者？\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"strong\",[t._v(\"不要影响\")]),t._v(\" → \"),s(\"code\",[t._v(\"REQUIRES_NEW\")])]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"可以部分影响\")]),t._v(\" → \"),s(\"code\",[t._v(\"NESTED\")]),t._v(\"（如果数据库支持）\")]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"必须一起\")]),t._v(\" → \"),s(\"code\",[t._v(\"REQUIRED\")])])])]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"这个方法必须在事务中/外执行吗？\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"strong\",[t._v(\"必须在事务中\")]),t._v(\" → \"),s(\"code\",[t._v(\"MANDATORY\")])]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"必须在事务外\")]),t._v(\" → \"),s(\"code\",[t._v(\"NEVER\")])])])])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"一句话总结\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#一句话总结\"}},[t._v(\"#\")]),t._v(\" 一句话总结\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[s(\"strong\",[t._v(\"REQUIRED\")]),t._v(\"：随大流，有队就排，没队自开（90%的情况）\")]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"REQUIRES_NEW\")]),t._v(\"：我的事重要，开新队优先办\")]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"NESTED\")]),t._v(\"：大任务里的小步骤，失败不影响整体\")]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"SUPPORTS\")]),t._v(\"：可有可无，你们决定\")]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"NOT_SUPPORTED\")]),t._v(\"：别烦我，我要单独办\")]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"NEVER\")]),t._v(\"：谁让我排队我跟谁急！\")]),t._v(\" \"),s(\"li\",[s(\"strong\",[t._v(\"MANDATORY\")]),t._v(\"：不排队就不给办！\")])]),t._v(\" \"),s(\"p\",[t._v('现在明白了吗？主要是理解\"当前有没有事务\"就是指'),s(\"strong\",[t._v(\"调用这个方法的时候，调用者自己是不是已经在事务中了\")]),t._v(\"。\")])])}),[],!1,null,null,null);s.default=e.exports}}]);","extractedComments":[]}