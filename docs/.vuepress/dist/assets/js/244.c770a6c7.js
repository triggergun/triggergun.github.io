(window.webpackJsonp=window.webpackJsonp||[]).push([[244],{1993:function(t,_,v){"use strict";v.r(_);var r=v(18),s=Object(r.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"内核态和用户态"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内核态和用户态"}},[t._v("#")]),t._v(" 内核态和用户态")]),t._v(" "),_("ul",[_("li",[t._v("什么是用户态？")]),t._v(" "),_("li",[t._v("什么是内核态？")]),t._v(" "),_("li",[t._v("为什么要区分这两种态？")]),t._v(" "),_("li",[t._v("如何理解两种态的工作方式？")])]),t._v(" "),_("h2",{attrs:{id:"框架图解"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#框架图解"}},[t._v("#")]),t._v(" 框架图解")]),t._v(" "),_("p",[_("img",{attrs:{src:v(367),alt:"image-20260101181020314"}})]),t._v(" "),_("h2",{attrs:{id:"什么是用户态"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#什么是用户态"}},[t._v("#")]),t._v(" 什么是用户态？")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("用户态")]),t._v("指的是应用程序代码所在的运行模式和虚拟地址空间。常见的用户程序如浏览器、编辑器、聊天工具等都在用户态运行。")]),t._v(" "),_("li",[t._v("用户态程序"),_("strong",[t._v("无法直接访问硬件或内核敏感资源")]),t._v("。当需要进行如文件访问、网络通信等敏感操作时，必须通过受控的机制（如系统调用）请求内核提供服务。")])]),t._v(" "),_("h2",{attrs:{id:"什么是内核态"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#什么是内核态"}},[t._v("#")]),t._v(" 什么是内核态？")]),t._v(" "),_("ul",[_("li",[_("strong",[t._v("内核态")]),t._v("是操作系统内核及其部分扩展（如硬件驱动、调度、内存管理等）运行时的高特权模式。在这个模式下，代码可直接访问所有硬件资源和内存空间。")]),t._v(" "),_("li",[t._v("内核态虽然拥有"),_("font",{attrs:{color:"red"}},[t._v("最高权限")]),t._v("，但内核代码"),_("strong",[t._v("必须遵循严格的接口和上下文规则")]),t._v("，如不允许在某些"),_("font",{attrs:{color:"red"}},[t._v("上下文中休眠")]),t._v("、必须保证"),_("font",{attrs:{color:"red"}},[t._v("同步安全")]),t._v("等。违规会导致内核 panic 或系统不稳定。")],1),t._v(" "),_("li",[t._v("现代 Linux 还支持如 FUSE、eBPF 等机制，"),_("font",{attrs:{color:"red"}},[t._v("允许部分系统功能")]),t._v("在用户空间实现，但"),_("font",{attrs:{color:"red"}},[t._v("核心控制")]),t._v("始终归内核管理。")],1)]),t._v(" "),_("h2",{attrs:{id:"为什么要区分这两种态"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#为什么要区分这两种态"}},[t._v("#")]),t._v(" 为什么要区分这两种态？")]),t._v(" "),_("p",[t._v("区分两种运行态，主要是"),_("strong",[t._v("保障系统安全性、稳定性与隔离性")]),t._v("：")]),t._v(" "),_("ul",[_("li",[t._v("如果普通应用程序（用户态）能直接操作硬件或系统资源，将极易导致整个系统安全和稳定性被破坏，一旦出现 Bug，后果严重。")]),t._v(" "),_("li",[t._v("因此，所有敏感和高权限的操作都由"),_("font",{attrs:{color:"red"}},[t._v("内核态统一调度和管理")]),t._v("。用户程序只能"),_("strong",[t._v("通过受控的系统调用接口")]),t._v("请求服务，这样可以保护内核和系统其他部分不被用户程序直接影响或破坏。")],1)]),t._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),_("p",[t._v("用户态与内核态之间的切换是通过"),_("font",{attrs:{color:"red"}},[t._v("受控的机制")]),t._v("——如“陷入（trap）”或系统调用——实现的。这种机制确保了对系统资源的访问必须经过严格"),_("font",{attrs:{color:"red"}},[t._v("授权和检查")]),t._v("。")],1),t._v(" "),_("p",[t._v("参考文档：https://en.wikipedia.org/wiki/User_space_and_kernel_space")])]),t._v(" "),_("h2",{attrs:{id:"如何理解两种态的工作方式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#如何理解两种态的工作方式"}},[t._v("#")]),t._v(" 如何理解两种态的工作方式？")]),t._v(" "),_("ul",[_("li",[t._v("把「用户态」想象成你在银行大厅，可以自由活动，但不能进去柜台后面的操作区。")]),t._v(" "),_("li",[t._v("「内核态」就像银行的金库和操作区，只有银行员工（内核）才能接触和操作。")]),t._v(" "),_("li",[t._v("你（用户程序）需要办理业务（比如取钱）时，得通过柜台（系统调用）告诉工作人员（内核）帮你操作。")])]),t._v(" "),_("p",[t._v("实际示例：")]),t._v(" "),_("ul",[_("li",[t._v("用户态调用 "),_("code",[t._v("read()")]),t._v(":\n"),_("ul",[_("li",[t._v("实际上 "),_("code",[t._v("read()")]),t._v(" 会触发系统调用，进入内核态由内核从磁盘/缓存读取数据再返回。")])])]),t._v(" "),_("li",[t._v("缺页（page fault）:\n"),_("ul",[_("li",[_("code",[t._v("访问未分配内存")]),t._v(" -> "),_("code",[t._v("CPU 触发 page fault")]),t._v(" -> "),_("code",[t._v("内核在内核态分配/加载页面")]),t._v(" -> "),_("code",[t._v("返回用户态继续执行（或进程被杀死）")])])])])]),t._v(" "),_("p",[t._v("日常使用的软件其中 "),_("code",[t._v("99%")]),t._v(" 都是在"),_("strong",[t._v("用户态")]),t._v("运行的，只有在请求操作系统干活的时候（比如用到硬件、创建进程、访问文件等），才会临时进入"),_("strong",[t._v("内核态")]),t._v("。")]),t._v(" "),_("div",{staticClass:"custom-block warning"},[_("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),_("p",[_("font",{attrs:{color:"red"}},[t._v("写驱动")]),t._v("、"),_("font",{attrs:{color:"red"}},[t._v("写内核模块")]),t._v("，就是直接在"),_("strong",[t._v("内核态")]),t._v("下工作，要更谨慎，否则会导致系统异常。")],1)])])}),[],!1,null,null,null);_.default=s.exports},367:function(t,_,v){t.exports=v.p+"assets/img/image-20260101181020314.f9b6e071.png"}}]);