(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1321:function(s,a,e){s.exports=e.p+"assets/img/image-20250228170750689.f6a34e8d.png"},1322:function(s,a,e){s.exports=e.p+"assets/img/image-20250228170847860.a4c410f3.png"},1323:function(s,a,e){s.exports=e.p+"assets/img/image-20250228170951110.0ae100ce.png"},1324:function(s,a,e){s.exports=e.p+"assets/img/image-20250228171100689.1744d946.png"},1325:function(s,a,e){s.exports=e.p+"assets/img/image-20250228171241610.70844994.png"},1326:function(s,a,e){s.exports=e.p+"assets/img/image-20250228171439610.d16b1d7c.png"},1327:function(s,a,e){s.exports=e.p+"assets/img/image-20250228171531456.f4701072.png"},1328:function(s,a,e){s.exports=e.p+"assets/img/image-20250228172453027.8dbb2b63.png"},1329:function(s,a,e){s.exports=e.p+"assets/img/image-20250228172512686.7fd38db9.png"},1330:function(s,a,e){s.exports=e.p+"assets/img/image-20250228175947505.228a16ef.png"},1720:function(s,a,e){"use strict";e.r(a);var t=e(14),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"harbor服务器进行构建镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#harbor服务器进行构建镜像"}},[s._v("#")]),s._v(" harbor服务器进行构建镜像")]),s._v(" "),a("h2",{attrs:{id:"配置镜像仓库地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置镜像仓库地址"}},[s._v("#")]),s._v(" 配置镜像仓库地址")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/docker/daemon.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n    "registry-mirrors": [\n        "https://<changme>.mirror.aliyuncs.com",\n        "https://dockerproxy.com",\n        "https://mirror.baidubce.com",\n        "https://docker.m.daocloud.io",\n        "https://docker.nju.edu.cn",\n        "https://docker.mirrors.sjtug.sjtu.edu.cn"\n     ],\n    "insecure-registries": ["192.168.5.203:80"]\n}\nEOF')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl daemon-reload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"验证是否能登入harbor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证是否能登入harbor"}},[s._v("#")]),s._v(" 验证是否能登入Harbor")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" login "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" admin "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" Harbor12345 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".5.203:80\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("验证成功的日志：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("✔ ----Harbor has been installed and started successfully.----\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@harbor harbor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker login -u admin -p Harbor12345 192.168.5.203:80")]),s._v("\nWARNING"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Using "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--password")]),s._v(" via the CLI is insecure. Use --password-stdin.\nWARNING"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Your password will be stored unencrypted "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /root/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#credentials-store")]),s._v("\n\nLogin Succeeded\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@harbor harbor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"jenkins新增服务器实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins新增服务器实例"}},[s._v("#")]),s._v(" jenkins新增服务器实例")]),s._v(" "),a("p",[s._v("现在harbor什么都没有。")]),s._v(" "),a("p",[a("img",{attrs:{src:e(1321),alt:"image-20250228170750689"}})]),s._v(" "),a("p",[s._v("第一步：选择系统管理。")]),s._v(" "),a("p",[a("img",{attrs:{src:e(1322),alt:"image-20250228170847860"}})]),s._v(" "),a("p",[s._v("第二步：找到系统配置。")]),s._v(" "),a("p",[a("img",{attrs:{src:e(1323),alt:"image-20250228170951110"}})]),s._v(" "),a("p",[s._v("我们新添加了一台harbor服务。所以要添加一个远程服务实例。")]),s._v(" "),a("p",[a("img",{attrs:{src:e(1324),alt:"image-20250228171100689"}})]),s._v(" "),a("p",[a("img",{attrs:{src:e(1325),alt:"image-20250228171241610"}})]),s._v(" "),a("h2",{attrs:{id:"jenkins重新配置任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins重新配置任务"}},[s._v("#")]),s._v(" jenkins重新配置任务")]),s._v(" "),a("p",[a("img",{attrs:{src:e(1326),alt:"image-20250228171439610"}})]),s._v(" "),a("p",[s._v("源码拉取没有变化，不用改变。")]),s._v(" "),a("p",[a("img",{attrs:{src:e(1327),alt:"image-20250228171531456"}})]),s._v(" "),a("p",[s._v("构建jar包也不需要调整的。")]),s._v(" "),a("p",[a("img",{attrs:{src:e(1328),alt:"image-20250228172453027"}})]),s._v(" "),a("p",[a("img",{attrs:{src:e(1329),alt:"image-20250228172512686"}})]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" build "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".5.203:80/public/myproject:1.0 /usr/local/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" login "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" admin "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" Harbor12345 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".5.203:80\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" push "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".5.203:80/public/myproject:1.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("ssh配置注意")]),s._v(" "),a("p",[s._v("如果远程执行命令时没有使用Exec in pty。ssh就会连接不上的问题。")]),s._v(" "),a("p",[a("img",{attrs:{src:e(1330),alt:"image-20250228175947505"}})])]),s._v(" "),a("h2",{attrs:{id:"jenkins执行远程拉取镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins执行远程拉取镜像"}},[s._v("#")]),s._v(" jenkins执行远程拉取镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" myproject\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myproject "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".5.203:80/public/myproject:1.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);