(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1710:function(s,a,t){s.exports=t.p+"assets/img/image-20250228132227703.1bcc39ad.png"},1711:function(s,a,t){s.exports=t.p+"assets/img/image-20250228133002252.ace3a3cd.png"},1712:function(s,a,t){s.exports=t.p+"assets/img/image-20250228133020192.dbcb8598.png"},1713:function(s,a,t){s.exports=t.p+"assets/img/image-20250228133106282.3c786058.png"},1714:function(s,a,t){s.exports=t.p+"assets/img/image-20250228133307240.ae4e67ba.png"},1715:function(s,a,t){s.exports=t.p+"assets/img/image-20250228133610015.6aa0d0b3.png"},1716:function(s,a,t){s.exports=t.p+"assets/img/image-20250228133626681.63b1cb59.png"},1717:function(s,a,t){s.exports=t.p+"assets/img/image-20250228133705306.1f58c4de.png"},1718:function(s,a,t){s.exports=t.p+"assets/img/image-20250228134203491.2212f901.png"},1719:function(s,a,t){s.exports=t.p+"assets/img/image-20250228142834243.caede4e7.png"},1720:function(s,a,t){s.exports=t.p+"assets/img/image-20250228142852531.a638bf62.png"},2313:function(s,a,t){"use strict";t.r(a);var e=t(18),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"jenkins自动构建docker镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins自动构建docker镜像"}},[s._v("#")]),s._v(" jenkins自动构建docker镜像")]),s._v(" "),a("h2",{attrs:{id:"创建dockerfile文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建dockerfile文件"}},[s._v("#")]),s._v(" 创建dockerfile文件")]),s._v(" "),a("p",[s._v("作用：通知docker怎么去构建镜像。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1710),alt:"image-20250228132227703"}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("FROM openjdk:8-jre-slim\nWORKDIR /usr/local\n# 本地产出的jar 复制到/usr/local 目录下\nCOPY myproject.jar .\nCMD java -jar myproject.jar\n#END\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"jenkins的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins的配置"}},[s._v("#")]),s._v(" jenkins的配置")]),s._v(" "),a("p",[s._v("删除原来的shell命令。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1711),alt:"image-20250228133002252"}})]),s._v(" "),a("p",[s._v("添加一个传输项。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1712),alt:"image-20250228133020192"}})]),s._v(" "),a("p",[a("img",{attrs:{src:t(1713),alt:"image-20250228133106282"}})]),s._v(" "),a("p",[s._v("我们再次进行构建。构建完成后。我们去目标服务器查看下。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1714),alt:"image-20250228133307240"}})]),s._v(" "),a("p",[s._v("docker与target目录不在同一个目录下。这样不好管理。")]),s._v(" "),a("p",[s._v("怎么样将这二个目录放在一起呢？")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1715),alt:"image-20250228133610015"}})]),s._v(" "),a("p",[a("img",{attrs:{src:t(1716),alt:"image-20250228133626681"}})]),s._v(" "),a("p",[s._v("执行的结果：")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1717),alt:"image-20250228133705306"}})]),s._v(" "),a("h2",{attrs:{id:"配置构建镜像命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置构建镜像命令"}},[s._v("#")]),s._v(" 配置构建镜像命令")]),s._v(" "),a("p",[s._v("Exec  command：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker build -t wutunan/myproject:1.0 /usr/local/\ndocker rm -f myproject\ndocker run -d -p 80:80 --name=myproject wutunan/myproject:1.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:t(1718),alt:"image-20250228134203491"}})]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("目标服务器注意")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("目标服务器一定要安装了docker才可以。我们构建镜像的命令是在目标服务器上执行的。")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("pkill java")]),s._v("干掉之前java的jar程序。运行我们现在构建的容器。")])])])]),s._v(" "),a("p",[s._v("我们点击理解构建。验证构建结果：")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1719),alt:"image-20250228142834243"}})]),s._v(" "),a("p",[s._v("查看容器是否存在。")]),s._v(" "),a("p",[a("img",{attrs:{src:t(1720),alt:"image-20250228142852531"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);