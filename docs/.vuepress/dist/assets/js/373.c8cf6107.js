(window.webpackJsonp=window.webpackJsonp||[]).push([[373],{2114:function(t,e,v){"use strict";v.r(e);var _=v(18),a=Object(_.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"text在mysql中是属于什么类型-它能存多少个字符"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#text在mysql中是属于什么类型-它能存多少个字符"}},[t._v("#")]),t._v(" text在Mysql中是属于什么类型？它能存多少个字符？")]),t._v(" "),e("p",[t._v("在 MySQL 中的准确定义是："),e("strong",[t._v("一种专门用于存储长文本的可变长度字符串类型，其存储上限是 65,535 字节，而非 65,535 个“字符”")])]),t._v(" "),e("p",[t._v("解 TEXT 容量问题的核心关键，以下为您精确拆解：")]),t._v(" "),e("h2",{attrs:{id:"类型本质-字节限制-vs-字符数量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#类型本质-字节限制-vs-字符数量"}},[t._v("#")]),t._v(" 类型本质：字节限制 vs 字符数量")]),t._v(" "),e("p",[t._v("MySQL 的 "),e("code",[t._v("TEXT")]),t._v(" 类型"),e("strong",[t._v("以字节为单位定义容量上限")]),t._v("（65,535 字节），"),e("strong",[t._v("不是以字符为单位")]),t._v("。因此它能存储的"),e("strong",[t._v("实际字符数量取决于您采用的字符集编码")]),t._v("：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("字符集")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("每字符占用")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("TEXT 最大可存储字符数")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("latin1")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("1 字节")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("65,535 个字符")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("utf8mb4")]),t._v(" (常用，含emoji)")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("最多 4 字节")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("约 16,383 个字符")]),t._v("（实际随字节数动态变化）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("gbk")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("最多 2 字节")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("约 32,767 个字符")])])])])]),t._v(" "),e("p",[e("strong",[t._v("结论")]),t._v("：在您当前表使用的 "),e("code",[t._v("utf8mb4")]),t._v(" 编码下，"),e("code",[t._v("text")]),t._v(" 字段"),e("strong",[t._v("最多可存储约 1.6 万个汉字（或混合文本）")]),t._v("。这不是一个固定字符数，而是当总字节数达到 65,535 时即满")]),t._v(" "),e("h2",{attrs:{id:"text-家族四兄弟-横向对比"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#text-家族四兄弟-横向对比"}},[t._v("#")]),t._v(" TEXT 家族四兄弟（横向对比）")]),t._v(" "),e("p",[t._v("您当前用的是“标准款”，MySQL 还提供了其他三档容量，供您参考是否需要调整：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("字节上限")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("utf8mb4 下约合字符")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("适用场景")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("TINYTEXT")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("255 字节")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("约 63 个汉字")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("极短备注、状态说明")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("TEXT（当前讨论的）")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("65,535 字节")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("约 1.6 万字")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("新闻摘要、中等描述、活动详情")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("MEDIUMTEXT")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("16,777,215 字节")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("约 419 万字")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("完整文章、JSON 大对象、日志")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("strong",[t._v("LONGTEXT")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("4,294,967,295 字节")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("约 10.7 亿字")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("书籍全文、超长文本")])])])]),t._v(" "),e("h2",{attrs:{id:"针对-事件描述-场景的判断"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#针对-事件描述-场景的判断"}},[t._v("#")]),t._v(" 针对“事件描述”场景的判断")]),t._v(" "),e("p",[e("strong",[t._v("您当前的建表语句完全合理，无需修改")]),t._v("。原因如下：")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("事件描述")]),t._v("通常字数在几百到两三千字，1.6 万字的容量绰绰有余；")]),t._v(" "),e("li",[t._v("若某个事件描述真的超过 1.6 万字（例如附带了超长文本日志），建议"),e("strong",[t._v("从产品逻辑上截断或摘要存储")]),t._v("，而非直接升级为 "),e("code",[t._v("MEDIUMTEXT")]),t._v("（该类型索引效率较低、内存临时表不友好）；")]),t._v(" "),e("li",[t._v("若您确实预见到“描述”可能包含"),e("strong",[t._v("数万字甚至更长")]),t._v("，可考虑升级为 "),e("code",[t._v("MEDIUMTEXT")]),t._v("，修改语句为：")])]),t._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token identifier"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("description"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mediumtext")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COMMENT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'事件描述'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"补充说明-mysql-8-0-的小优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#补充说明-mysql-8-0-的小优化"}},[t._v("#")]),t._v(" 补充说明：MySQL 8.0 的小优化")]),t._v(" "),e("p",[t._v("MySQL 8.0 版本中，"),e("code",[t._v("TEXT")]),t._v(" 类型支持了"),e("strong",[t._v("隐式的ROW格式存储")]),t._v("，对 JSON 操作、大字段 UPDATE 性能有一定提升，但容量上限没有变化，您无需为此担心。")]),t._v(" "),e("p",[e("strong",[t._v("一句话总结")]),t._v("：您表里的 "),e("code",[t._v("text")]),t._v(" 能存约 "),e("strong",[t._v("1.6 万汉字（utf8mb4）")]),t._v("，常规事件描述完全够用，放心保留即可。")])])}),[],!1,null,null,null);e.default=a.exports}}]);