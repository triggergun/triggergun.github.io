(window.webpackJsonp=window.webpackJsonp||[]).push([[407],{2268:function(v,_,a){"use strict";a.r(_);var l=a(18),n=Object(l.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"docker的macvlan网络模式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#docker的macvlan网络模式"}},[v._v("#")]),v._v(" docker的Macvlan网络模式")]),v._v(" "),_("h2",{attrs:{id:"macvlan介绍"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#macvlan介绍"}},[v._v("#")]),v._v(" Macvlan介绍")]),v._v(" "),_("p",[v._v("Macvlan 是 Docker 提供的一种网络驱动，允许容器直接连接到物理网络，并为每个容器分配一个独立的 MAC 地址和 IP 地址。它的特点如下：")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("直接连接到物理网络")]),v._v("：\n"),_("ul",[_("li",[v._v("容器通过物理网络接口（如 "),_("code",[v._v("ens33")]),v._v("）直接与外部网络通信。")]),v._v(" "),_("li",[v._v("容器看起来像是物理网络中的一个独立设备。")])])]),v._v(" "),_("li",[_("strong",[v._v("独立的 MAC 和 IP 地址")]),v._v("：\n"),_("ul",[_("li",[v._v("每个容器都有自己的 MAC 地址和 IP 地址。")]),v._v(" "),_("li",[v._v("外部网络可以直接访问容器，无需通过 NAT 或端口映射。")])])]),v._v(" "),_("li",[_("strong",[v._v("高性能")]),v._v("：\n"),_("ul",[_("li",[v._v("由于容器直接连接到物理网络，通信性能较高。")])])]),v._v(" "),_("li",[_("strong",[v._v("适用场景")]),v._v("：\n"),_("ul",[_("li",[v._v("需要容器直接暴露在物理网络中的场景。")]),v._v(" "),_("li",[v._v("需要容器拥有独立 IP 地址的场景。")])])])]),v._v(" "),_("h2",{attrs:{id:"命令案例解析"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#命令案例解析"}},[v._v("#")]),v._v(" 命令案例解析")]),v._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v("docker network create -d macvlan \\\n  --subnet=192.168.31.0/24 \\\n  --ip-range=192.168.31.0/24 \\\n  --gateway=192.168.31.1 \\\n  -o parent=ens33 \\\n  macvlan31\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br"),_("span",{staticClass:"line-number"},[v._v("3")]),_("br"),_("span",{staticClass:"line-number"},[v._v("4")]),_("br"),_("span",{staticClass:"line-number"},[v._v("5")]),_("br"),_("span",{staticClass:"line-number"},[v._v("6")]),_("br")])]),_("p",[v._v("参数说明：")]),v._v(" "),_("ul",[_("li",[_("strong",[_("code",[v._v("-d macvlan")])]),v._v("：\n"),_("ul",[_("li",[v._v("指定网络驱动为 "),_("code",[v._v("macvlan")]),v._v("。")])])]),v._v(" "),_("li",[_("strong",[_("code",[v._v("--subnet=192.168.31.0/24")])]),v._v("：\n"),_("ul",[_("li",[v._v("指定 Macvlan 网络的子网范围（CIDR 格式）。")])])]),v._v(" "),_("li",[_("strong",[_("code",[v._v("--ip-range=192.168.31.0/24")])]),v._v("：\n"),_("ul",[_("li",[v._v("指定容器可分配的 IP 地址范围（与子网范围一致）。")])])]),v._v(" "),_("li",[_("strong",[_("code",[v._v("--gateway=192.168.31.1")])]),v._v("：\n"),_("ul",[_("li",[v._v("指定网络的网关地址。")])])]),v._v(" "),_("li",[_("strong",[_("code",[v._v("-o parent=ens33")])]),v._v("：\n"),_("ul",[_("li",[v._v("指定 Macvlan 网络使用的物理网络接口（这里是 "),_("code",[v._v("ens33")]),v._v("）。")])])]),v._v(" "),_("li",[_("strong",[_("code",[v._v("macvlan31")])]),v._v("：\n"),_("ul",[_("li",[v._v("自定义的网络名称。")])])])]),v._v(" "),_("h2",{attrs:{id:"macvlan网络的工作原理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#macvlan网络的工作原理"}},[v._v("#")]),v._v(" Macvlan网络的工作原理")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("物理接口")]),v._v("：\n"),_("ul",[_("li",[v._v("Macvlan 网络依赖于一个物理网络接口（如 "),_("code",[v._v("ens33")]),v._v("），容器通过该接口直接连接到物理网络。")])])]),v._v(" "),_("li",[_("strong",[v._v("虚拟接口")]),v._v("：\n"),_("ul",[_("li",[v._v("Docker 会在物理接口上创建虚拟接口，每个容器绑定到一个虚拟接口。")])])]),v._v(" "),_("li",[_("strong",[v._v("独立 MAC 和 IP")]),v._v("：\n"),_("ul",[_("li",[v._v("每个容器都有自己的 MAC 地址和 IP 地址，外部网络可以直接访问容器。")])])]),v._v(" "),_("li",[_("strong",[v._v("无 NAT")]),v._v("：\n"),_("ul",[_("li",[v._v("容器与外部网络通信时，不需要经过 NAT 或端口映射。")])])])]),v._v(" "),_("h2",{attrs:{id:"macvlan的优缺点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#macvlan的优缺点"}},[v._v("#")]),v._v(" Macvlan的优缺点")]),v._v(" "),_("p",[v._v("优点：")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("高性能")]),v._v("：容器直接连接到物理网络，通信延迟低。")]),v._v(" "),_("li",[_("strong",[v._v("独立 IP")]),v._v("：每个容器拥有独立的 IP 地址，适合需要直接暴露容器的场景。")]),v._v(" "),_("li",[_("strong",[v._v("无 NAT")]),v._v("：避免了 NAT 带来的复杂性。")])]),v._v(" "),_("p",[v._v("缺点：")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("MAC 地址限制")]),v._v("：\n"),_("ul",[_("li",[v._v("某些网络设备可能对 MAC 地址数量有限制，过多的容器可能导致问题。")])])]),v._v(" "),_("li",[_("strong",[v._v("网络配置复杂")]),v._v("：\n"),_("ul",[_("li",[v._v("需要手动管理 IP 地址分配，避免冲突。")])])]),v._v(" "),_("li",[_("strong",[v._v("不支持主机通信")]),v._v("：\n"),_("ul",[_("li",[v._v("默认情况下，Macvlan 网络中的容器无法与宿主机直接通信。")])])])]),v._v(" "),_("h2",{attrs:{id:"适用场景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#适用场景"}},[v._v("#")]),v._v(" 适用场景")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("需要容器直接暴露在物理网络中")]),v._v("：\n"),_("ul",[_("li",[v._v("例如，运行需要独立 IP 的服务（如 Web 服务器、数据库等）。")])])]),v._v(" "),_("li",[_("strong",[v._v("高性能网络需求")]),v._v("：\n"),_("ul",[_("li",[v._v("例如，对网络延迟敏感的应用（如实时数据处理）。")])])]),v._v(" "),_("li",[_("strong",[v._v("避免 NAT")]),v._v("：\n"),_("ul",[_("li",[v._v("例如，需要避免 NAT 带来的复杂性或性能损失。")])])])]),v._v(" "),_("h2",{attrs:{id:"总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[v._v("#")]),v._v(" 总结")]),v._v(" "),_("p",[v._v("你提供的命令创建了一个 "),_("strong",[v._v("Macvlan 网络")]),v._v("，名为 "),_("code",[v._v("macvlan31")]),v._v("，它使用物理接口 "),_("code",[v._v("ens33")]),v._v("，并为容器分配 "),_("code",[v._v("192.168.31.0/24")]),v._v(" 网段的 IP 地址。Macvlan 网络适用于需要容器直接连接到物理网络并拥有独立 IP 地址的场景，具有高性能和无 NAT 的优点，但需要注意 MAC 地址限制和网络配置的复杂性。")])])}),[],!1,null,null,null);_.default=n.exports}}]);