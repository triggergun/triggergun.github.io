# ubuntuå®‰è£…postgre13

ç¤¾åŒºåœ°å€ï¼š[PostgreSQL - Community Help Wiki](https://help.ubuntu.com/community/PostgreSQL/)

## ubuntuçš„ç³»ç»Ÿç¯å¢ƒ

Ubuntu 24.04.2 LTS

![image-20251011120904664](demo01_2025_10_10_03.assets/image-20251011120904664.png)

::: tip å»ºè®®

åœ¨é€‰ç”¨ç³»ç»Ÿç¯å¢ƒç‰ˆæœ¬å·æ—¶ä¸å¿…è¦çº ç»“é€‰é‚£ä¸ªç‰ˆæœ¬ã€‚å¯ä»¥å’Œæˆ‘ä¿æŒä¸€è‡´ã€‚ä¹Ÿå¯ä»¥ç›´æ¥ç”¨æœ€æ–°ç¨³å®šç‰ˆæœ¬ã€‚ä½†æ˜¯å°½é‡å‡å°‘å»ä½¿ç”¨ubuntuçš„è€ç‰ˆæœ¬ç³»ç»Ÿã€‚å› ä¸ºè¿™æ ·ä¼šèŠ±å¾ˆå¤šæ—¶é—´å»è§£å†³å…¶å®ƒé—®é¢˜ã€‚

:::

## å¤±è´¥çš„å®‰è£…æµç¨‹

```shell
sudo apt-get install curl ca-certificates gnupg 
```

æ­£å¸¸æƒ…å†µä¸‹è¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯ï¼š

```
(base) gun@gun:~/æ¡Œé¢$ sudo apt-get install curl ca-certificates gnupg
[sudo] gun çš„å¯†ç ï¼š 
æ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆ
æ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘... å®Œæˆ
æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ                 
curl å·²ç»æ˜¯æœ€æ–°ç‰ˆ (8.5.0-2ubuntu10.6)ã€‚
ca-certificates å·²ç»æ˜¯æœ€æ–°ç‰ˆ (20240203)ã€‚
ca-certificates å·²è®¾ç½®ä¸ºæ‰‹åŠ¨å®‰è£…ã€‚
gnupg å·²ç»æ˜¯æœ€æ–°ç‰ˆ (2.4.4-2ubuntu17.2)ã€‚
gnupg å·²è®¾ç½®ä¸ºæ‰‹åŠ¨å®‰è£…ã€‚
å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 76 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§
```



```shell
curl https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add
```

https://www.postgresql.org/media/keys/ACCC4CF8.asc è¿™ä¸ªè¡¨ç¤ºPostgreSQL APT ä»“åº“çš„å¯†é’¥åœ°å€ã€‚



```
(base) gun@gun:~/æ¡Œé¢$ curl https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
100  4812  100  4812    0     0    906      0  0:00:05  0:00:05 --:--:--  1123
OK
(base) gun@gun:~/æ¡Œé¢$ 
```



åˆ›å»ºæ–‡ä»¶/etc/apt/sources.list.d/pgdg.listã€‚

```shell
sudo sh -c 'echo "deb https://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)pgdg main" > /etc/apt/sources.list.d/pgdg.list'
```

$(lsb_release -cs) è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ





æŸ¥çœ‹è‡ªå·±åˆ›å»ºçš„æ–‡ä»¶ï¼š

![image-20251011111228715](demo01_2025_10_10_03.assets/image-20251011111228715.png)





```shell
sudo apt-get update 
sudo apt-get install postgresql-13
```





## å¿«é€Ÿå®‰è£…PostgreSQL 13

è¿™ä¸ªå®˜æ–¹ç½‘ç«™ç»™å‡ºçš„å®‰è£…æµç¨‹ï¼š

```shell
sudo apt install -y postgresql-common ca-certificates
sudo /usr/share/postgresql-common/pgdg/apt.postgresql.org.sh
```



```
(base) gun@gun:~/æ¡Œé¢$ sudo apt install -y postgresql-common ca-certificates
æ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆ
æ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘... å®Œæˆ
æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ                 
ca-certificates å·²ç»æ˜¯æœ€æ–°ç‰ˆ (20240203)ã€‚
å°†ä¼šåŒæ—¶å®‰è£…ä¸‹åˆ—è½¯ä»¶ï¼š
  libcommon-sense-perl libjson-perl libjson-xs-perl libperl5.38t64
  libtypes-serialiser-perl perl perl-base perl-modules-5.38
  postgresql-client-common
å»ºè®®å®‰è£…ï¼š
  perl-doc libterm-readline-gnu-perl | libterm-readline-perl-perl
  libtap-harness-archive-perl
ä¸‹åˆ—ã€æ–°ã€‘è½¯ä»¶åŒ…å°†è¢«å®‰è£…ï¼š
  libcommon-sense-perl libjson-perl libjson-xs-perl libtypes-serialiser-perl
  postgresql-client-common postgresql-common
ä¸‹åˆ—è½¯ä»¶åŒ…å°†è¢«å‡çº§ï¼š
  libperl5.38t64 perl perl-base perl-modules-5.38
å‡çº§äº† 4 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 6 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 371 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚
éœ€è¦ä¸‹è½½ 395 kB/10.4 MB çš„å½’æ¡£ã€‚
è§£å‹ç¼©åä¼šæ¶ˆè€— 1,332 kB çš„é¢å¤–ç©ºé—´ã€‚
è·å–:1 http://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libjson-perl all 4.10000-1 [81.9 kB]
è·å–:2 http://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 postgresql-client-common all 257build1.1 [36.4 kB]
è·å–:3 http://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 postgresql-common all 257build1.1 [161 kB]
è·å–:4 http://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libcommon-sense-perl amd64 3.75-3build3 [20.4 kB]
è·å–:5 http://mirrors.tuna.tsinghua.edu.cn/ubuntu noble/main amd64 libtypes-serialiser-perl all 1.01-1 [11.6 kB]
è·å–:6 http://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates/main amd64 libjson-xs-perl amd64 4.040-0ubuntu0.24.04.1 [83.7 kB]
å·²ä¸‹è½½ 395 kBï¼Œè€—æ—¶ 1ç§’ (345 kB/s)                   
æ­£åœ¨é¢„è®¾å®šè½¯ä»¶åŒ… ...
(æ­£åœ¨è¯»å–æ•°æ®åº“ ... ç³»ç»Ÿå½“å‰å…±å®‰è£…æœ‰ 193555 ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚)
å‡†å¤‡è§£å‹ .../libperl5.38t64_5.38.2-3.2ubuntu0.2_amd64.deb  ...
æ­£åœ¨è§£å‹ libperl5.38t64:amd64 (5.38.2-3.2ubuntu0.2) å¹¶è¦†ç›– (5.38.2-3.2build2.1) 
...
å‡†å¤‡è§£å‹ .../perl_5.38.2-3.2ubuntu0.2_amd64.deb  ...
æ­£åœ¨è§£å‹ perl (5.38.2-3.2ubuntu0.2) å¹¶è¦†ç›– (5.38.2-3.2build2.1) ...
å‡†å¤‡è§£å‹ .../perl-base_5.38.2-3.2ubuntu0.2_amd64.deb  ...
æ­£åœ¨è§£å‹ perl-base (5.38.2-3.2ubuntu0.2) å¹¶è¦†ç›– (5.38.2-3.2build2.1) ...
æ­£åœ¨è®¾ç½® perl-base (5.38.2-3.2ubuntu0.2) ...
(æ­£åœ¨è¯»å–æ•°æ®åº“ ... ç³»ç»Ÿå½“å‰å…±å®‰è£…æœ‰ 193555 ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚)
å‡†å¤‡è§£å‹ .../0-perl-modules-5.38_5.38.2-3.2ubuntu0.2_all.deb  ...
æ­£åœ¨è§£å‹ perl-modules-5.38 (5.38.2-3.2ubuntu0.2) å¹¶è¦†ç›– (5.38.2-3.2build2.1) ...
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… libjson-perlã€‚
å‡†å¤‡è§£å‹ .../1-libjson-perl_4.10000-1_all.deb  ...
æ­£åœ¨è§£å‹ libjson-perl (4.10000-1) ...
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… postgresql-client-commonã€‚
å‡†å¤‡è§£å‹ .../2-postgresql-client-common_257build1.1_all.deb  ...
æ­£åœ¨è§£å‹ postgresql-client-common (257build1.1) ...
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… postgresql-commonã€‚
å‡†å¤‡è§£å‹ .../3-postgresql-common_257build1.1_all.deb  ...
æ­£åœ¨æ·»åŠ  é€šè¿‡ postgresql-common ä» /usr/bin/pg_config åˆ° /usr/bin/pg_config.libp
q-dev çš„è½¬ç§»
æ­£åœ¨è§£å‹ postgresql-common (257build1.1) ...
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… libcommon-sense-perl:amd64ã€‚
å‡†å¤‡è§£å‹ .../4-libcommon-sense-perl_3.75-3build3_amd64.deb  ...
æ­£åœ¨è§£å‹ libcommon-sense-perl:amd64 (3.75-3build3) ...
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… libtypes-serialiser-perlã€‚
å‡†å¤‡è§£å‹ .../5-libtypes-serialiser-perl_1.01-1_all.deb  ...
æ­£åœ¨è§£å‹ libtypes-serialiser-perl (1.01-1) ...
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… libjson-xs-perlã€‚
å‡†å¤‡è§£å‹ .../6-libjson-xs-perl_4.040-0ubuntu0.24.04.1_amd64.deb  ...
æ­£åœ¨è§£å‹ libjson-xs-perl (4.040-0ubuntu0.24.04.1) ...
æ­£åœ¨è®¾ç½® perl-modules-5.38 (5.38.2-3.2ubuntu0.2) ...
æ­£åœ¨è®¾ç½® libperl5.38t64:amd64 (5.38.2-3.2ubuntu0.2) ...
æ­£åœ¨è®¾ç½® perl (5.38.2-3.2ubuntu0.2) ...
æ­£åœ¨è®¾ç½® libjson-perl (4.10000-1) ...
æ­£åœ¨è®¾ç½® postgresql-client-common (257build1.1) ...
æ­£åœ¨è®¾ç½® libcommon-sense-perl:amd64 (3.75-3build3) ...
æ­£åœ¨è®¾ç½® postgresql-common (257build1.1) ...

Creating config file /etc/postgresql-common/createcluster.conf with new version
Building PostgreSQL dictionaries from installed myspell/hunspell packages...
  en_us
Removing obsolete dictionary files:
'/etc/apt/trusted.gpg.d/apt.postgresql.org.gpg' -> '/usr/share/postgresql-common
/pgdg/apt.postgresql.org.gpg'
Created symlink /etc/systemd/system/multi-user.target.wants/postgresql.service â†’
 /usr/lib/systemd/system/postgresql.service.
æ­£åœ¨è®¾ç½® libtypes-serialiser-perl (1.01-1) ...
æ­£åœ¨è®¾ç½® libjson-xs-perl (4.040-0ubuntu0.24.04.1) ...
æ­£åœ¨å¤„ç†ç”¨äº man-db (2.12.0-4build2) çš„è§¦å‘å™¨ ...
æ­£åœ¨å¤„ç†ç”¨äº libc-bin (2.39-0ubuntu8.4) çš„è§¦å‘å™¨ ...
(base) gun@gun:~/æ¡Œé¢$ 
```

éå¸¸æ˜æ˜¾ca-certificatesç³»ç»Ÿä¸ŠåŸæ¥å°±æ˜¯æœ‰çš„ã€‚

```shell
(base) gun@gun:~/æ¡Œé¢$ sudo /usr/share/postgresql-common/pgdg/apt.postgresql.org.sh
// æ­¤è„šæœ¬å°†åœ¨APT.PostgreSQL.orgä¸Šå¯ç”¨PostgreSQL APTå­˜å‚¨åº“ä½ çš„ç³»ç»Ÿã€‚ä½¿ç”¨çš„å‘è¡Œä»£å·å°†æ˜¯noble pgdgã€‚
This script will enable the PostgreSQL APT repository on apt.postgresql.org on
your system. The distribution codename used will be noble-pgdg.

// æŒ‰Enterç»§ç»­ï¼Œæˆ–æŒ‰Ctrl-Cä¸­æ­¢ã€‚
Press Enter to continue, or Ctrl-C to abort.

// æˆ‘ç‚¹å‡»äº†ç»§ç»­å®‰è£…...

// ä½¿ç”¨å¯†é’¥ç¯/usr/share/postgresql-common/pgdg/apt.postgresql.org.pgg
Using keyring /usr/share/postgresql-common/pgdg/apt.postgresql.org.gpg
// å†™ä¸­....
Writing /etc/apt/sources.list.d/pgdg.sources ...
å·²åˆ é™¤ '/etc/apt/sources.list.d/pgdg.list'
å·²åˆ é™¤ '/etc/apt/trusted.gpg.d/apt.postgresql.org.gpg'

Running apt-get update ...
å‘½ä¸­:1 http://mirrors.tuna.tsinghua.edu.cn/ubuntu noble InRelease              
å‘½ä¸­:4 http://security.ubuntu.com/ubuntu noble-security InRelease              
å‘½ä¸­:2 http://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates InRelease
å‘½ä¸­:3 http://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-backports InRelease
è·å–:5 https://apt.postgresql.org/pub/repos/apt noble-pgdg InRelease [107 kB]
è·å–:6 https://apt.postgresql.org/pub/repos/apt noble-pgdg/main amd64 Packages [350 kB]
å·²ä¸‹è½½ 456 kBï¼Œè€—æ—¶ 8ç§’ (56.1 kB/s)                                            
æ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆ

// ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä»apt.postgresql.orgå¼€å§‹å®‰è£…è½¯ä»¶åŒ…ã€‚
You can now start installing packages from apt.postgresql.org.

Have a look at https://wiki.postgresql.org/wiki/Apt for more information;
most notably the FAQ at https://wiki.postgresql.org/wiki/Apt/FAQ
(base) gun@gun:~/æ¡Œé¢$ 
```



æ‰§è¡Œå®‰è£…æŒ‡å®šç‰ˆæœ¬å‘½ä»¤ï¼š

```shell
sudo apt install postgresql-13
```



```shell
(base) gun@gun:~/æ¡Œé¢$ sudo apt install postgresql-13
æ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆ
æ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘... å®Œæˆ
æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ                 
å°†ä¼šåŒæ—¶å®‰è£…ä¸‹åˆ—è½¯ä»¶ï¼š
  libpq5 postgresql-client-13
å»ºè®®å®‰è£…ï¼š
  libpq-oauth postgresql-doc-13
ä¸‹åˆ—ã€æ–°ã€‘è½¯ä»¶åŒ…å°†è¢«å®‰è£…ï¼š
  libpq5 postgresql-13 postgresql-client-13
å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 3 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 373 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚
éœ€è¦ä¸‹è½½ 16.0 MB çš„å½’æ¡£ã€‚
è§£å‹ç¼©åä¼šæ¶ˆè€— 55.5 MB çš„é¢å¤–ç©ºé—´ã€‚
æ‚¨å¸Œæœ›ç»§ç»­æ‰§è¡Œå—ï¼Ÿ [Y/n] y
è·å–:1 https://apt.postgresql.org/pub/repos/apt noble-pgdg/main amd64 libpq5 amd64 18.0-1.pgdg24.04+3 [248 kB]
è·å–:2 https://apt.postgresql.org/pub/repos/apt noble-pgdg/main amd64 postgresql-client-13 amd64 13.22-1.pgdg24.04+1 [1,536 kB]
è·å–:3 https://apt.postgresql.org/pub/repos/apt noble-pgdg/main amd64 postgresql-13 amd64 13.22-1.pgdg24.04+1 [14.2 MB]
å·²ä¸‹è½½ 16.0 MBï¼Œè€—æ—¶ 4åˆ† 28ç§’ (59.5 kB/s)                                      
æ­£åœ¨é¢„è®¾å®šè½¯ä»¶åŒ… ...
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… libpq5:amd64ã€‚
(æ­£åœ¨è¯»å–æ•°æ®åº“ ... ç³»ç»Ÿå½“å‰å…±å®‰è£…æœ‰ 193776 ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚)
å‡†å¤‡è§£å‹ .../libpq5_18.0-1.pgdg24.04+3_amd64.deb  ...
æ­£åœ¨è§£å‹ libpq5:amd64 (18.0-1.pgdg24.04+3) ...
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… postgresql-client-13ã€‚
å‡†å¤‡è§£å‹ .../postgresql-client-13_13.22-1.pgdg24.04+1_amd64.deb  ...
æ­£åœ¨è§£å‹ postgresql-client-13 (13.22-1.pgdg24.04+1) ...
æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… postgresql-13ã€‚
å‡†å¤‡è§£å‹ .../postgresql-13_13.22-1.pgdg24.04+1_amd64.deb  ...
æ­£åœ¨è§£å‹ postgresql-13 (13.22-1.pgdg24.04+1) ...
æ­£åœ¨è®¾ç½® libpq5:amd64 (18.0-1.pgdg24.04+3) ...
æ­£åœ¨è®¾ç½® postgresql-client-13 (13.22-1.pgdg24.04+1) ...
update-alternatives: ä½¿ç”¨ /usr/share/postgresql/13/man/man1/psql.1.gz æ¥åœ¨è‡ªåŠ¨æ¨¡
å¼ä¸­æä¾› /usr/share/man/man1/psql.1.gz (psql.1.gz)
æ­£åœ¨è®¾ç½® postgresql-13 (13.22-1.pgdg24.04+1) ...
Creating new PostgreSQL cluster 13/main ...
/usr/lib/postgresql/13/bin/initdb -D /var/lib/postgresql/13/main --auth-local pe
er --auth-host md5
å±äºæ­¤æ•°æ®åº“ç³»ç»Ÿçš„æ–‡ä»¶å®¿ä¸»ä¸ºç”¨æˆ· "postgres".
æ­¤ç”¨æˆ·ä¹Ÿå¿…é¡»ä¸ºæœåŠ¡å™¨è¿›ç¨‹çš„å®¿ä¸».
æ•°æ®åº“ç°‡å°†ä½¿ç”¨æœ¬åœ°åŒ–è¯­è¨€ "zh_CN.UTF-8"è¿›è¡Œåˆå§‹åŒ–.
é»˜è®¤çš„æ•°æ®åº“ç¼–ç å·²ç»ç›¸åº”çš„è®¾ç½®ä¸º "UTF8".
initdb: could not find suitable text search configuration for locale "zh_CN.UTF-
8"
ç¼ºçœçš„æ–‡æœ¬æœç´¢é…ç½®å°†ä¼šè¢«è®¾ç½®åˆ°"simple"

ç¦æ­¢ä¸ºæ•°æ®é¡µç”Ÿæˆæ ¡éªŒå’Œ.

ä¿®å¤å·²å­˜åœ¨ç›®å½• /var/lib/postgresql/13/main çš„æƒé™ ... æˆåŠŸ
æ­£åœ¨åˆ›å»ºå­ç›®å½• ... æˆåŠŸ
é€‰æ‹©åŠ¨æ€å…±äº«å†…å­˜å®ç° ......posix
é€‰æ‹©é»˜è®¤æœ€å¤§è”æ¥æ•° (max_connections) ... 100
é€‰æ‹©é»˜è®¤å…±äº«ç¼“å†²åŒºå¤§å° (shared_buffers) ... 128MB
selecting default time zone ... Asia/Shanghai
åˆ›å»ºé…ç½®æ–‡ä»¶ ... æˆåŠŸ
æ­£åœ¨è¿è¡Œè‡ªä¸¾è„šæœ¬ ...æˆåŠŸ
æ­£åœ¨æ‰§è¡Œè‡ªä¸¾ååˆå§‹åŒ– ...æˆåŠŸ
åŒæ­¥æ•°æ®åˆ°ç£ç›˜...æˆåŠŸ

æˆåŠŸã€‚æ‚¨ç°åœ¨å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤å¼€å¯æ•°æ®åº“æœåŠ¡å™¨ï¼š

    pg_ctlcluster 13 main start

æ­£åœ¨å¤„ç†ç”¨äº postgresql-common (257build1.1) çš„è§¦å‘å™¨ ...
Building PostgreSQL dictionaries from installed myspell/hunspell packages...
  en_us
Removing obsolete dictionary files:
æ­£åœ¨å¤„ç†ç”¨äº libc-bin (2.39-0ubuntu8.4) çš„è§¦å‘å™¨ ...

```





å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°è¿™æ ·çš„å¼¹æ¡†ã€‚æˆ‘ä»¬ç‚¹å‡»ç¡®è®¤å°±è¡Œã€‚

```shell
Obsolete major version 13
è¿‡æ—¶çš„ä¸»è¦ç‰ˆæœ¬13
 â”‚ 
 PostgreSQLç‰ˆæœ¬13å·²ç»è¿‡æ—¶ï¼Œä½†æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯åŒ…ä»ç„¶å®‰è£…ã€‚
 â”‚ The PostgreSQL version 13 is obsolete, but the server or client packages    
 â”‚ are still installed. 
 
 è¯·å®‰è£…æœ€æ–°çš„åŒ…ï¼ˆpostgresql-16å’Œpostgresql-client-16ï¼‰ï¼Œå¹¶ä½¿ç”¨pg_upgradeclusterå‡çº§ç°æœ‰é›†ç¾¤ï¼ˆè¯·å‚é˜…æ‰‹å†Œé¡µï¼‰
 Please install the latest packages (postgresql-16      
 â”‚ and postgresql-client-16) and upgrade the existing  clusters with           
 â”‚ pg_upgradecluster (see manpage).                                            
 â”‚                                                                             
 â”‚ Please be aware that the installation of postgresql-16 will                 
 â”‚ automatically create a default cluster 16/main.
 
 If you want to upgrade      
 â”‚ the 13/main cluster, you need to remove the already existing 16 cluster     
 â”‚ (pg_dropcluster --stop 16 main, see manpage for details).                   

ä¸å†æ”¯æŒæ—§çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯è½¯ä»¶åŒ…ã€‚
 â”‚ The old server and client packages are no longer supported. 

å‡çº§ç°æœ‰é›†ç¾¤åï¼Œåº”åˆ é™¤postgresql-13å’Œpostgresql-client-13åŒ…ã€‚       
 After the existing clusters are upgraded, the postgresql-13 and                       
 â”‚ postgresql-client-13 packages should be removed.                            

è¯·å‚é˜…/usr/share/doc/postgresql-common/READMEã€‚Debian.gzäº†è§£è¯¦æƒ…ã€‚   
 â”‚ Please see /usr/share/doc/postgresql-common/README.Debian.gz for            
 â”‚ details.   
```

![image-20251011115243393](demo01_2025_10_10_03.assets/image-20251011115243393.png)









## æ‰‹åŠ¨å­˜å‚¨åº“é…ç½®å®‰è£…

Manual Repository Configuration 

é…ç½®æµç¨‹åœ¨å®˜æ–¹ç½‘ç«™ï¼š[Apt - PostgreSQL ç»´åŸº --- Apt - PostgreSQL wiki](https://wiki.postgresql.org/wiki/Apt)

## é»˜è®¤èº«ä»½ç™»å…¥

å®‰è£…å¥½postgreåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é»˜è®¤èº«ä»½è¿›è¡Œå‘½ä»¤è¡Œç™»å…¥ã€‚

```shell
sudo -u postgres psql postgres
# sudo -u æŒ‡å®šç³»ç»Ÿç”¨æˆ·å psql æ•°æ®åå­—
```

![image-20251011115517082](demo01_2025_10_10_03.assets/image-20251011115517082.png)

éªŒè¯å®‰è£…æˆåŠŸï¼š

ç‰ˆæœ¬å·æ˜¯13.22



æŒ‡å®šç³»ç»Ÿç”¨æˆ·ä½¿ç”¨psqlç™»å…¥postgreSQLã€‚æ²¡æœ‰æŒ‡å®šä½¿ç”¨é‚£ä¸ªæ•°æ®åº“ã€‚

```shell
sudo -u postgres psql
```

1. **`sudo`** - è¶…çº§ç”¨æˆ·æƒé™

- ä½œç”¨ï¼šä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤
- ç›¸å½“äºï¼š"è¯·ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œ"

2. **`-u postgres`** - æŒ‡å®šç”¨æˆ·

- ä½œç”¨ï¼šä»¥ `postgres` ç”¨æˆ·èº«ä»½æ‰§è¡Œ
- PostgreSQL åœ¨å®‰è£…æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä¸“é—¨çš„ `postgres` ç³»ç»Ÿç”¨æˆ·æ¥ç®¡ç†æ•°æ®åº“

3. **`psql`** - PostgreSQL å®¢æˆ·ç«¯å·¥å…·

- ä½œç”¨ï¼šPostgreSQL çš„äº¤äº’å¼å‘½ä»¤è¡Œå®¢æˆ·ç«¯
- åŠŸèƒ½ï¼šå¯ä»¥æ‰§è¡Œ SQL å‘½ä»¤ã€ç®¡ç†æ•°æ®åº“

4. **`postgres`** - æ•°æ®åº“åç§°

- ä½œç”¨ï¼šæŒ‡å®šè¦è¿æ¥çš„æ•°æ®åº“å
- `postgres` æ˜¯ PostgreSQL å®‰è£…ååˆ›å»ºçš„é»˜è®¤æ•°æ®åº“

## è§£æç‰ˆæœ¬å·

å®‰è£…æˆåŠŸåè¾“å…¥select version()å°±å¯ä»¥æŸ¥çœ‹å®‰è£…çš„ç‰ˆæœ¬ã€‚

```shell
postgres=# select version();
```

è¾“å‡ºçš„ç‰ˆæœ¬ä¿¡æ¯å¦‚ä¸‹ï¼š

PostgreSQL 13.22 (Ubuntu 13.22-1.pgdg24.04+1) on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0, 64-bit

ä¸Šé¢çš„ä¿¡æ¯éƒ½æ˜¯è¡¨ç¤ºä»€ä¹ˆæ„æ€ä¸€ä¸ªéƒ½çœ‹ä¸æ‡‚ï¼Ÿè¯¦ç»†è§£é‡Šä¸‹ã€‚

1. **PostgreSQL 13.22** - æ•°æ®åº“ä¸»ç‰ˆæœ¬

- **`13`**: ä¸»ç‰ˆæœ¬å·
  - è¿™æ˜¯ PostgreSQL çš„ç¬¬13ä¸ªå¤§ç‰ˆæœ¬
  - æ¯ä¸ªä¸»ç‰ˆæœ¬éƒ½æœ‰æ˜¾è‘—çš„åŠŸèƒ½æ”¹è¿›
- **`.22`**: å°ç‰ˆæœ¬å·ï¼ˆè¡¥ä¸ç‰ˆæœ¬ï¼‰
  - è¿™æ˜¯ç¬¬13ä¸ªå¤§ç‰ˆæœ¬çš„ç¬¬22æ¬¡æ›´æ–°
  - åŒ…å«å®‰å…¨ä¿®å¤ã€bugä¿®å¤ï¼Œä½†ä¸å¼•å…¥æ–°åŠŸèƒ½
  - âœ… **è¯´æ˜ä½ çš„æ•°æ®åº“ä¿æŒå¾—å¾ˆå¥½ï¼Œç»å¸¸æ›´æ–°**

2. **(Ubuntu 13.22-1.pgdg24.04+1)** - æ‰“åŒ…ä¿¡æ¯

- **`Ubuntu`**: åŒ…ç®¡ç†ç³»ç»Ÿ
  - è¿™æ˜¯ä¸º Ubuntu ç³»ç»Ÿç‰¹åˆ«æ‰“åŒ…çš„ç‰ˆæœ¬
- **`13.22-1`**: åŒ…ç‰ˆæœ¬å·
  - `13.22`: PostgreSQL ç‰ˆæœ¬
  - `-1`: åŒ…çš„ç¬¬ä¸€æ¬¡æ„å»º
- **`pgdg24.04+1`**: æ‰“åŒ…æ¥æº
  - `pgdg`: PostgreSQL Global Development Groupï¼ˆå®˜æ–¹å¼€å‘ç»„ï¼‰
  - `24.04`: é’ˆå¯¹ Ubuntu 24.04 ç³»ç»Ÿä¼˜åŒ–
  - `+1`: åŒ…çš„ä¿®è®¢ç‰ˆæœ¬

3. **on x86_64-pc-linux-gnu** - è¿è¡Œå¹³å°

- **`x86_64`**: CPU æ¶æ„
  - 64ä½ Intel/AMD å¤„ç†å™¨
  - æ”¯æŒæ›´å¤šå†…å­˜å’Œæ›´å¥½æ€§èƒ½
- **`pc`**: æœºå™¨ç±»å‹
  - ä¸ªäººè®¡ç®—æœºæ¶æ„
- **`linux-gnu`**: æ“ä½œç³»ç»Ÿ
  - GNU/Linux ç³»ç»Ÿ

4. **compiled by gcc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0** - ç¼–è¯‘ä¿¡æ¯

- **`gcc`**: ç¼–è¯‘å™¨
  - GNU Compiler Collectionï¼Œç”¨äºç¼–è¯‘ PostgreSQL
- **`Ubuntu 13.3.0-6ubuntu2~24.04`**: ç¼–è¯‘å™¨ç‰ˆæœ¬ä¿¡æ¯
  - Ubuntu ç³»ç»Ÿè‡ªå¸¦çš„ GCC 13.3.0 ç¼–è¯‘å™¨
- **`13.3.0`**: ç¼–è¯‘å™¨ä¸»ç‰ˆæœ¬
  - GCC ç‰ˆæœ¬ 13.3.0

5. **64-bit** - æ¶æ„ä½æ•°

- **`64-bit`**: 64ä½ç‰ˆæœ¬
  - å¯ä»¥å¤„ç†æ›´å¤§å†…å­˜ï¼ˆè¶…è¿‡4GBï¼‰
  - æ›´å¥½çš„æ€§èƒ½

**é€šä¿—æ˜“æ‡‚çš„è§£é‡Š**

æƒ³è±¡æˆ**æ±½è½¦**çš„è§„æ ¼è¯´æ˜ï¼š

```
PostgreSQL 13.22 (Ubuntu 13.22-1.pgdg24.04+1) on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0, 64-bit
```

- **ğŸš— PostgreSQL 13.22** = ä¸°ç”°å¡ç½—æ‹‰ 2023æ¬¾ï¼ˆè½¦å‹+å¹´ä»½ï¼‰
- **ğŸ”§ (Ubuntu...)** = ç”±ä¸°ç”°4Såº—ä¸“é—¨ä¸ºæœ¬åœ°é“è·¯è°ƒæ ¡çš„ç‰ˆæœ¬
- **ğŸ­ x86_64-pc-linux-gnu** = åœ¨æ ‡å‡†æ±½è½¦ç”Ÿäº§çº¿ä¸Šåˆ¶é€ 
- **ğŸ”© compiled by gcc...** = ä½¿ç”¨å¾·å›½åšä¸–çš„ä¸“ä¸šå·¥å…·åˆ¶é€ 
- **ğŸ’ª 64-bit** = 2.0Læ’é‡å‘åŠ¨æœºï¼ŒåŠ¨åŠ›å¼ºåŠ²

è¿™å¯¹ä½ æ„å‘³ç€ä»€ä¹ˆï¼Ÿ

 **å¥½æ¶ˆæ¯ï¼š**

1. **ç‰ˆæœ¬è¾ƒæ–°** - 13.22 æ˜¯ç¨³å®šç‰ˆæœ¬
2. **å®‰å…¨æ›´æ–°** - å°ç‰ˆæœ¬22è¯´æ˜å®‰å…¨æ¼æ´å·²ä¿®å¤
3. **64ä½æ€§èƒ½** - å¯ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½
4. **å®˜æ–¹æ”¯æŒ** - æ¥è‡ª PostgreSQL å®˜æ–¹å›¢é˜Ÿçš„æ‰“åŒ…

::: tip æ³¨æ„ï¼š

PostgreSQL 13 å·²ç»æ¥è¿‘ç”Ÿå‘½å‘¨æœŸç»“æŸï¼Œå»ºè®®è€ƒè™‘å‡çº§åˆ°æ›´æ–°ç‰ˆæœ¬ï¼š

:::

```shell
# æŸ¥çœ‹å‡çº§é€‰é¡¹
sudo apt-cache search postgresql-15
sudo apt-cache search postgresql-16
```

::: tip æ€»ç»“

ä½ çš„ PostgreSQL å®‰è£…æ˜¯ï¼š

- **ç‰ˆæœ¬**ï¼š13.22ï¼ˆç¨³å®šä½†è¾ƒè€ï¼‰
- **å¹³å°**ï¼š64ä½ Ubuntu ç³»ç»Ÿ
- **æ¥æº**ï¼šå®˜æ–¹ç»´æŠ¤çš„åŒ…
- **çŠ¶æ€**ï¼šå®‰å…¨æ›´æ–°è‰¯å¥½ï¼Œæ€§èƒ½æ­£å¸¸

è¿™æ˜¯ä¸€ä¸ªå®Œå…¨å¯ç”¨çš„ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼

:::



## æ£€æŸ¥æ˜¯å¦å®‰è£…PostgreSQL 13

è¯è¯´ï¼šå®‰è£…å®¹æ˜“ï¼Œå¸è½½éš¾ã€‚

ç»è¿‡ä¸Šé¢çš„å®‰è£…æˆåŠŸåçš„ç¯å¢ƒã€‚

æ£€æŸ¥å®‰è£…åŒ…ï¼š

```shell
# æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„ PostgreSQL ç›¸å…³åŒ…
dpkg -l | grep postgresql

# æˆ–è€…æ›´ç²¾ç¡®åœ°æŸ¥çœ‹ postgresql-13 ç›¸å…³åŒ…
dpkg -l | grep postgresql-13

# æŸ¥çœ‹å…·ä½“çš„åŒ…å
dpkg --list | grep -i postgres
```

![image-20251011124336514](demo01_2025_10_10_03.assets/image-20251011124336514.png)

| åŒ…å‘½                     | æè¿°                                                      | ä¸­æ–‡æè¿°                           |
| :----------------------- | --------------------------------------------------------- | ---------------------------------- |
| libpq5:amd64             | PostgreSQL C client library                               | PostgreSQL Cå®¢æˆ·ç«¯åº“ã€‚             |
| postgresql-13            | The World's Most Advanced Open Source Relational Database | ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„å¼€æºå…³ç³»æ•°æ®åº“ã€‚     |
| postgresql-client-13     | front-end programs for PostgreSQL 13                      | PostgreSQL 13çš„å‰ç«¯ç¨‹åºã€‚          |
| postgresql-client-common | manager for multiple PostgreSQL client versions           | å¤šä¸ªPostgreSQLå®¢æˆ·ç«¯ç‰ˆæœ¬çš„ç®¡ç†å™¨ã€‚ |
| postgresql-common        | PostgreSQL database-cluster manager                       | PostgreSQLæ•°æ®åº“é›†ç¾¤ç®¡ç†å™¨ã€‚       |

1. **libpq5:amd64** - PostgreSQL å®¢æˆ·ç«¯åº“

**ä½œç”¨**ï¼šè¿™æ˜¯ PostgreSQL çš„ C è¯­è¨€å®¢æˆ·ç«¯åº“

- ğŸ“š **åŠŸèƒ½**ï¼šå…è®¸å…¶ä»–ç¨‹åºè¿æ¥åˆ° PostgreSQL æ•°æ®åº“
- ğŸ”— **ä¾èµ–å…³ç³»**ï¼šå¾ˆå¤šåº”ç”¨ç¨‹åºï¼ˆå¦‚ pgAdminã€å…¶ä»–æ•°æ®åº“å·¥å…·ï¼‰éƒ½éœ€è¦è¿™ä¸ªåº“æ¥è¿æ¥ PostgreSQL
- ğŸ’¡ **ç‰¹ç‚¹**ï¼šå³ä½¿å¸è½½ PostgreSQL æœåŠ¡å™¨ï¼Œè¿™ä¸ªåº“ä¹Ÿå¯èƒ½è¢«å…¶ä»–è½¯ä»¶ä¾èµ–ï¼Œæ‰€ä»¥å¯ä»¥ä¿ç•™

2. **postgresql-13** - PostgreSQL 13 æœåŠ¡å™¨

**ä½œç”¨**ï¼šPostgreSQL æ•°æ®åº“æœåŠ¡å™¨ä¸»ç¨‹åº

- ğŸ—„ï¸ **åŠŸèƒ½**ï¼šæ•°æ®åº“å¼•æ“æ ¸å¿ƒï¼Œè´Ÿè´£æ•°æ®å­˜å‚¨ã€æŸ¥è¯¢å¤„ç†ã€äº‹åŠ¡ç®¡ç†ç­‰
- ğŸ“ **åŒ…å«**ï¼šæ•°æ®åº“æœåŠ¡å™¨è¿›ç¨‹ã€å­˜å‚¨å¼•æ“ã€æŸ¥è¯¢ä¼˜åŒ–å™¨ç­‰
- ğŸ  **å®‰è£…ä½ç½®**ï¼š`/usr/lib/postgresql/13/`

3. **postgresql-client-13** - PostgreSQL 13 å®¢æˆ·ç«¯å·¥å…·

**ä½œç”¨**ï¼šç”¨äºè¿æ¥å’Œç®¡ç† PostgreSQL 13 æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ç¨‹åº

- ğŸ”§ **åŒ…å«å·¥å…·**ï¼š
  - `psql` - å‘½ä»¤è¡Œå®¢æˆ·ç«¯
  - `pg_dump` - æ•°æ®åº“å¤‡ä»½å·¥å…·
  - `pg_restore` - æ•°æ®åº“æ¢å¤å·¥å…·
  - `createdb` / `dropdb` - æ•°æ®åº“åˆ›å»º/åˆ é™¤å·¥å…·
- ğŸ’» **ç”¨é€”**ï¼šåœ¨æœ¬åœ°æˆ–è¿œç¨‹ç®¡ç† PostgreSQL æ•°æ®åº“

4. **postgresql-client-common** - å®¢æˆ·ç«¯é€šç”¨ç®¡ç†å·¥å…·

**ä½œç”¨**ï¼šç®¡ç†å¤šä¸ª PostgreSQL å®¢æˆ·ç«¯ç‰ˆæœ¬

- ğŸ”„ **åŠŸèƒ½**ï¼š
  - ç®¡ç†ä¸åŒç‰ˆæœ¬çš„å®¢æˆ·ç«¯å·¥å…·
  - å¤„ç†å®¢æˆ·ç«¯ç‰ˆæœ¬çš„åˆ‡æ¢
  - æä¾›ç‰ˆæœ¬æ— å…³çš„å®¢æˆ·ç«¯å‘½ä»¤
- ğŸŒ **ç‰¹ç‚¹**ï¼šå³ä½¿å®‰è£…äº†å¤šä¸ª PostgreSQL ç‰ˆæœ¬ï¼Œè¿™ä¸ªåŒ…ä¹Ÿèƒ½åè°ƒå®ƒä»¬

5. **postgresql-common** - PostgreSQL é€šç”¨ç®¡ç†å·¥å…·

**ä½œç”¨**ï¼šç®¡ç†å¤šä¸ª PostgreSQL æœåŠ¡å™¨å®ä¾‹

- ğŸ› ï¸ **åŠŸèƒ½**ï¼š
  - ç®¡ç†æ•°æ®åº“é›†ç¾¤ï¼ˆclusterï¼‰
  - å¤„ç†å¤šç‰ˆæœ¬ PostgreSQL å…±å­˜
  - æä¾› `pg_lsclusters`ã€`pg_createcluster` ç­‰ç®¡ç†å‘½ä»¤
  - ç®¡ç†æœåŠ¡å¯åŠ¨/åœæ­¢è„šæœ¬
- ğŸ“Š **åŒ…å«å‘½ä»¤**ï¼š
  - `pg_lsclusters` - åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“é›†ç¾¤
  - `pg_createcluster` - åˆ›å»ºæ–°é›†ç¾¤
  - `pg_dropcluster` - åˆ é™¤é›†ç¾¤
  - `pg_ctlcluster` - æ§åˆ¶é›†ç¾¤çŠ¶æ€

æŸ¥çœ‹æœåŠ¡æ˜¯å¦åœ¨è¿è¡Œï¼š

```shell
systemctl status postgresql
```

![image-20251011123725657](demo01_2025_10_10_03.assets/image-20251011123725657.png)





## å®Œå…¨å¸è½½PostgreSQL 13

```shell
# å¸è½½æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯
sudo apt-get remove --purge postgresql-13 postgresql-client-13

# ä½†ä¿ç•™é€šç”¨å·¥å…·ï¼ˆå¯èƒ½è¢«å…¶ä»–è½¯ä»¶ä¾èµ–ï¼‰
sudo apt-get remove --purge postgresql-13 postgresql-client-13

# å¦‚æœä½ æƒ³ä¿ç•™å®¢æˆ·ç«¯å·¥å…·è¿æ¥å…¶ä»–æœåŠ¡å™¨ï¼Œåªå¸è½½æœåŠ¡å™¨
sudo apt-get remove --purge postgresql-13

# å®Œå…¨æ¸…ç†ï¼ˆåŒ…æ‹¬é€šç”¨å·¥å…·ï¼‰
sudo apt-get remove --purge postgresql-13 postgresql-client-13 postgresql-client-common postgresql-common
```

libpq5 é€šå¸¸ä¿ç•™ï¼Œå› ä¸ºå…¶ä»–è½¯ä»¶å¯èƒ½ä¾èµ–å®ƒ

å¸è½½æ‰§è¡Œæ—¥å¿—ï¼š

```shell
(base) gun@gun:~/æ¡Œé¢$ sudo apt-get remove --purge postgresql-13 postgresql-client-13 postgresql-client-common postgresql-common
[sudo] gun çš„å¯†ç ï¼š 
æ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆ
æ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘... å®Œæˆ
æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ                 
ä¸‹åˆ—è½¯ä»¶åŒ…æ˜¯è‡ªåŠ¨å®‰è£…çš„å¹¶ä¸”ç°åœ¨ä¸éœ€è¦äº†ï¼š
  libcommon-sense-perl libjson-perl libjson-xs-perl libpq5
  libtypes-serialiser-perl
ä½¿ç”¨'sudo apt autoremove'æ¥å¸è½½å®ƒ(å®ƒä»¬)ã€‚
ä¸‹åˆ—è½¯ä»¶åŒ…å°†è¢«ã€å¸è½½ã€‘ï¼š
  postgresql-13* postgresql-client-13* postgresql-client-common*
  postgresql-common*
å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 4 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 371 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚
è§£å‹ç¼©åå°†ä¼šç©ºå‡º 55.1 MB çš„ç©ºé—´ã€‚
æ‚¨å¸Œæœ›ç»§ç»­æ‰§è¡Œå—ï¼Ÿ [Y/n] y
(æ­£åœ¨è¯»å–æ•°æ®åº“ ... ç³»ç»Ÿå½“å‰å…±å®‰è£…æœ‰ 195628 ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚)
æ­£åœ¨å¸è½½ postgresql-13 (13.22-1.pgdg24.04+1) ...
update-alternatives: è­¦å‘Š: é“¾æ¥ç»„ psql.1.gz å·²æŸåï¼Œæ•…å¼ºåˆ¶é‡æ–°å®‰è£…å€™é€‰é¡¹ /usr/share/postgresql/13/man/man1/psql.1.gz
æ­£åœ¨å¸è½½ postgresql-client-13 (13.22-1.pgdg24.04+1) ...
æ­£åœ¨å¸è½½ postgresql-common (257build1.1) ...
æ­£åœ¨åˆ é™¤ é€šè¿‡ postgresql-common ä» /usr/bin/pg_config åˆ° /usr/bin/pg_config.libpq-dev çš„è½¬ç§»
æ­£åœ¨å¸è½½ postgresql-client-common (257build1.1) ...
æ­£åœ¨å¤„ç†ç”¨äº man-db (2.12.0-4build2) çš„è§¦å‘å™¨ ...
(æ­£åœ¨è¯»å–æ•°æ®åº“ ... ç³»ç»Ÿå½“å‰å…±å®‰è£…æœ‰ 193641 ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚)
æ­£åœ¨æ¸…é™¤ postgresql-client-common (257build1.1) çš„é…ç½®æ–‡ä»¶ ...
æ­£åœ¨æ¸…é™¤ postgresql-common (257build1.1) çš„é…ç½®æ–‡ä»¶ ...
dpkg: è­¦å‘Š: å¸è½½ postgresql-common æ—¶ï¼Œç›®å½• /var/log/postgresql éç©ºï¼Œå› è€Œä¸ä¼šåˆ é™¤è¯¥ç›®å½•
dpkg: è­¦å‘Š: å¸è½½ postgresql-common æ—¶ï¼Œç›®å½• /var/lib/postgresql éç©ºï¼Œå› è€Œä¸ä¼šåˆ é™¤è¯¥ç›®å½•
dpkg: è­¦å‘Š: å¸è½½ postgresql-common æ—¶ï¼Œç›®å½• /etc/postgresql éç©ºï¼Œå› è€Œä¸ä¼šåˆ é™¤è¯¥ç›®å½•
æ­£åœ¨æ¸…é™¤ postgresql-13 (13.22-1.pgdg24.04+1) çš„é…ç½®æ–‡ä»¶ ...
Dropping cluster main...
(base) gun@gun:~/æ¡Œé¢$ 
```

å¸è½½å®Œæˆåå†æ¬¡ç™»å…¥æ— æ•ˆï¼š

![image-20251011125234773](demo01_2025_10_10_03.assets/image-20251011125234773.png)





## åˆ›å»ºæ–°ç”¨æˆ·

```shell
postgres=# CREATE USER anthony SUPERUSER;
```

å°†æ‚¨çœ‹åˆ°çš„ anthony æ›¿æ¢ä¸ºæ‚¨çš„ Ubuntu ç”¨æˆ·åã€‚

```shell
# åˆ›å»ºæ–°ç”¨æˆ·çš„è¯­æ³•æ ¼å¼ã€‚
CREATE USER æŒ‡å®šç”¨æˆ·åå­— SUPERUSER;
```

ä½¿ç”¨æ–°åˆ›å»ºçš„ç”¨æˆ·è¿›è¡Œç™»å…¥ã€‚

```shell
psql -U gun -d postgres
# å‘½ä»¤è¯­æ³•æ ¼å¼
psql -U è‡ªå·±æ–°åˆ›å»ºçš„ç”¨æˆ·å -d postgres
# è¿™ä¸ªå‘½ä»¤æ˜¯é”™è¯¯çš„
psql -U postgres -d postgres
```

æ˜¾ç¤ºå½“å‰ç™»å…¥çš„æ˜¯é‚£ä¸ªç”¨æˆ·ï¼Ÿ

SELECT current_user;

```shell
postgres=# SELECT current_user;
 current_user 
--------------
 gun
(1 è¡Œè®°å½•)
```













































