(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{1270:function(s,e,a){s.exports=a.p+"assets/img/image-20250226140543070.85137816.png"},1710:function(s,e,a){"use strict";a.r(e);var n=a(14),r=Object(n.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"centos7安装docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装docker"}},[s._v("#")]),s._v(" centos7安装docker")]),s._v(" "),e("p",[s._v("这里面安装的是docker最新版。")]),s._v(" "),e("p",[s._v("启用 IPv4 数据包转发（"),e("code",[s._v("net.ipv4.ip_forward=1")]),s._v("），通常用于路由器或容器化环境。")]),s._v(" "),e("p",[s._v("增加进程的内存映射区域数量限制（"),e("code",[s._v("vm.max_map_count=655360")]),s._v("），通常用于运行 Elasticsearch 等需要大量内存映射的应用程序。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/sysctl.conf "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'EOF'\nnet.ipv4.ip_forward=1\nvm.max_map_count=655360\nEOF")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("这些配置不会立即生效，需要运行以下命令使配置生效：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("通过这种方式，可以方便地将内核参数配置写入 "),e("code",[s._v("/etc/sysctl.conf")]),s._v(" 文件，并使其永久生效。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("systemctl stop firewalld\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"_1-安装底层工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装底层工具"}},[s._v("#")]),s._v(" 1)安装底层工具")]),s._v(" "),e("p",[s._v("执行下面命令的前提是要保证yum源正常。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo yum install -y yum-utils device-mapper-persistent-data lvm2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这是我们安装Docker的底层⼯具，它就会⾃动的给我们提示下载，很快下载就完成了。")]),s._v(" "),e("p",[s._v("这条命令的作用是安装 "),e("code",[s._v("yum-utils")]),s._v("、"),e("code",[s._v("device-mapper-persistent-data")]),s._v(" 和 "),e("code",[s._v("lvm2")]),s._v(" 三个软件包，通常用于增强系统管理能力，尤其是在存储管理和 Docker 配置中。")]),s._v(" "),e("p",[s._v("问：yum-utils是什么？")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("作用")]),s._v("：这是一个包含多个实用工具的软件包，用于扩展 "),e("code",[s._v("yum")]),s._v(" 的功能。")]),s._v(" "),e("li",[e("strong",[s._v("常用工具")]),s._v("：\n"),e("ul",[e("li",[e("code",[s._v("yum-config-manager")]),s._v("：管理 YUM 仓库配置。")]),s._v(" "),e("li",[e("code",[s._v("repoquery")]),s._v("：查询仓库中的软件包信息。")]),s._v(" "),e("li",[e("code",[s._v("yumdownloader")]),s._v("：下载 RPM 包而不安装。")])])]),s._v(" "),e("li",[e("strong",[s._v("用途")]),s._v("：在管理 YUM 仓库或调试包依赖时非常有用")])]),s._v(" "),e("p",[s._v("问：device-mapper-persistent-data是什么？")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("作用")]),s._v("：这是一个用于管理设备映射（Device Mapper）的工具，提供持久化存储设备映射的功能。")]),s._v(" "),e("li",[e("strong",[s._v("用途")]),s._v("：通常用于 LVM（逻辑卷管理）和 Docker 的存储驱动（如 "),e("code",[s._v("devicemapper")]),s._v("）。")])]),s._v(" "),e("p",[s._v("问：lvm2是什么？")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("作用")]),s._v("：LVM2（Logical Volume Manager 2）是一个逻辑卷管理工具，用于管理磁盘分区和卷。")]),s._v(" "),e("li",[e("strong",[s._v("功能")]),s._v("：\n"),e("ul",[e("li",[s._v("创建、调整大小、删除逻辑卷。")]),s._v(" "),e("li",[s._v("动态调整磁盘空间。")]),s._v(" "),e("li",[s._v("支持快照和卷组管理。")])])]),s._v(" "),e("li",[e("strong",[s._v("用途")]),s._v("：在需要灵活管理磁盘空间时非常有用，尤其是在服务器环境中。")])]),s._v(" "),e("h2",{attrs:{id:"_2-加入阿里云yum仓库提速docker下载过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-加入阿里云yum仓库提速docker下载过程"}},[s._v("#")]),s._v(" 2)加入阿里云yum仓库提速docker下载过程")]),s._v(" "),e("p",[s._v("2.1)增加阿⾥云的Docker下载仓库，默认情况下，Docker官⽅是从他的国外的服务器下载速度是⾮常慢的， 所以在这⾥我们是使用yum  -config-manager组件来指定⼀个新的下载源，指向的是阿里的应用服务器， 通过阿⾥来提高我们Docker的下载速度。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("2.2) 更新⼀下仓库的源信息 。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo yum makecache fast\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行效果")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@192 yum.repos.d]# sudo yum makecache fast\n已加载插件：fastestmirror\nLoading mirror speeds from cached hostfile\n * base: mirrors.aliyun.com\n * extras: mirrors.aliyun.com\n * updates: mirrors.aliyun.com\nbase                                                                                                                                                                        | 3.6 kB  00:00:00     \ndocker-ce-stable                                                                                                                                                            | 3.5 kB  00:00:00     \nextras                                                                                                                                                                      | 2.9 kB  00:00:00     \nupdates                                                                                                                                                                     | 2.9 kB  00:00:00     \n(1/2): docker-ce-stable/7/x86_64/updateinfo                                                                                                                                 |   55 B  00:00:00     \n(2/2): docker-ce-stable/7/x86_64/primary_db                                                                                                                                 | 152 kB  00:00:00     \n元数据缓存已建立\n[root@192 yum.repos.d]# \n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("h2",{attrs:{id:"_3-自动安装下载docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-自动安装下载docker"}},[s._v("#")]),s._v(" 3) 自动安装下载Docker")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" sudo yum -y install docker-ce\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("执行上面命令后大概要1分钟时间下载。效果如下图：")]),s._v(" "),e("p",[e("img",{attrs:{src:a(1270),alt:"image-20250226140543070"}})]),s._v(" "),e("p",[s._v("安装docker的依赖信息：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("已安装:\ndocker-ce.x86_64 3:26.1.4-1.el7                                                                           \n作为依赖被安装:\naudit-libs-python.x86_64 0:2.8.5-4.el7       \ncheckpolicy.x86_64 0:2.5-8.el7               \ncontainer-selinux.noarch 2:2.119.2-1.911c772.el7_8    \ncontainerd.io.x86_64 0:1.6.33-3.1.el7         \ndocker-buildx-plugin.x86_64 0:0.14.1-1.el7    \ndocker-ce-cli.x86_64 1:26.1.4-1.el7           \ndocker-ce-rootless-extras.x86_64 0:26.1.4-1.el7       \ndocker-compose-plugin.x86_64 0:2.27.1-1.el7   \nfuse-overlayfs.x86_64 0:0.7.2-6.el7_8         \nfuse3-libs.x86_64 0:3.6.1-4.el7               \nlibcgroup.x86_64 0:0.41-21.el7                        \nlibseccomp.x86_64 0:2.3.1-4.el7               \nlibsemanage-python.x86_64 0:2.5-14.el7        \npolicycoreutils-python.x86_64 0:2.5-34.el7    \npython-IPy.noarch 0:0.75-6.el7                        \nsetools-libs.x86_64 0:3.3.8-4.el7             \nslirp4netns.x86_64 0:0.4.3-4.el7_8           \n作为依赖被升级:\npolicycoreutils.x86_64 0:2.5-34.el7  \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("h2",{attrs:{id:"_4-启动docker服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动docker服务"}},[s._v("#")]),s._v(" 4)启动docker服务")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo service docker start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"_5-验证docker是否启动成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-验证docker是否启动成功"}},[s._v("#")]),s._v(" 5)验证docker是否启动成功")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker version\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("验证结果： 26.1.4")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@192 yum.repos.d]# docker version\nClient: Docker Engine - Community\n Version:           26.1.4\n API version:       1.45\n Go version:        go1.21.11\n Git commit:        5650f9b\n Built:             Wed Jun  5 11:32:04 2024\n OS/Arch:           linux/amd64\n Context:           default\n\nServer: Docker Engine - Community\n Engine:\n  Version:          26.1.4\n  API version:      1.45 (minimum version 1.24)\n  Go version:       go1.21.11\n  Git commit:       de5c9cf\n  Built:            Wed Jun  5 11:31:02 2024\n  OS/Arch:          linux/amd64\n  Experimental:     false\n containerd:\n  Version:          1.6.33\n  GitCommit:        d2d58213f83a351ca8f528a95fbd145f5654e957\n runc:\n  Version:          1.1.12\n  GitCommit:        v1.1.12-0-g51d5e94\n docker-init:\n  Version:          0.19.0\n  GitCommit:        de40ad0\n[root@192 yum.repos.d]# \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);