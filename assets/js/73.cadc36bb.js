(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{551:function(t,a,s){t.exports=s.p+"assets/img/image-20231209224153715.5a09323b.png"},772:function(t,a,s){"use strict";s.r(a);var r=s(14),e=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"实现用户登陆功能-5-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现用户登陆功能-5-7"}},[t._v("#")]),t._v(" 实现用户登陆功能[5-7]")]),t._v(" "),a("p",[t._v("我们完成了超级管理员注册流程之后，用户表中就已经有了超级管理员记录，那么接下来我们可以利用这个用户记录来完成Emos小程序的微信登陆功能。")]),t._v(" "),a("h2",{attrs:{id:"_01-如何判定登陆"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_01-如何判定登陆"}},[t._v("#")]),t._v(" 01)如何判定登陆")]),t._v(" "),a("p",[t._v("用户表中并没有密码字段，我们无法根据username和password来判定用户是否可以登录。因为用户要拿着微信登陆Emos小程序，在用户表中只有 "),a("font",{attrs:{color:"red"}},[t._v("openid")]),t._v(" 、"),a("font",{attrs:{color:"red"}},[t._v(" nickname")]),t._v(" 和 "),a("font",{attrs:{color:"red"}},[t._v("photo ")]),t._v("跟微信账号相关，我们应该如何判定用户登陆?")],1),t._v(" "),a("p",[a("img",{attrs:{src:s(551),alt:"image-20231209224153715"}})]),t._v(" "),a("p",[t._v("我们可以这样设计，用户在Emos登陆页面点击登陆按钮，然后小程序把 临时授权字符串 提交给后端Java系统。后端Java系统拿着临时授权字符串换取到 openid ，我们查询用户表中是否存在这个 openid 。如果存在，意味着该用户是已注册用户，可以登录。如果不存在，说明该用户尚未注册，目前还不是我们的员工，所以禁止登录。")]),t._v(" "),a("h2",{attrs:{id:"_02-编写持久层代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_02-编写持久层代码"}},[t._v("#")]),t._v(" 02)编写持久层代码")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在TbuserDao.xml 文件中，编写查询语句")])]),t._v(" "),a("li",[a("p",[t._v("在TbUserDao.java 中，定义DAO方法")])])]),t._v(" "),a("h2",{attrs:{id:"_03-编写业务层代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_03-编写业务层代码"}},[t._v("#")]),t._v(" 03)编写业务层代码")]),t._v(" "),a("ul",[a("li",[t._v("在Userservice.java 中定义抽象方法")])])])}),[],!1,null,null,null);a.default=e.exports}}]);