(window.webpackJsonp=window.webpackJsonp||[]).push([[391],{2150:function(a,s,t){"use strict";t.r(s);var n=t(18),r=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"spring的-transactional注解深度解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring的-transactional注解深度解析"}},[a._v("#")]),a._v(" spring的@Transactional注解深度解析")]),a._v(" "),s("h2",{attrs:{id:"相关问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关问题"}},[a._v("#")]),a._v(" 相关问题")]),a._v(" "),s("ol",[s("li",[a._v("@Transactional的实现原理是什么？")]),a._v(" "),s("li",[a._v("@Transactional我们应该怎么去深入了解？")]),a._v(" "),s("li",[a._v("@Transactional注解在怎么情况下会失效？")])]),a._v(" "),s("h2",{attrs:{id:"核心模块-必须关注"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心模块-必须关注"}},[a._v("#")]),a._v(" 核心模块（必须关注）")]),a._v(" "),s("h3",{attrs:{id:"_1-spring-tx-最主要"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-spring-tx-最主要"}},[a._v("#")]),a._v(" "),s("strong",[a._v("1. spring-tx（最主要）")])]),a._v(" "),s("p",[s("strong",[a._v("这是 "),s("code",[a._v("@Transactional")]),a._v(" 注解的实现所在模块")])]),a._v(" "),s("ul",[s("li",[a._v("包含 "),s("code",[a._v("org.springframework.transaction.annotation.Transactional")])]),a._v(" "),s("li",[a._v("事务管理器接口 "),s("code",[a._v("PlatformTransactionManager")])]),a._v(" "),s("li",[a._v("事务定义 "),s("code",[a._v("TransactionDefinition")])]),a._v(" "),s("li",[a._v("事务状态 "),s("code",[a._v("TransactionStatus")])]),a._v(" "),s("li",[a._v("事务拦截器 "),s("code",[a._v("TransactionInterceptor")])])]),a._v(" "),s("h3",{attrs:{id:"_2-spring-aop-第二重要"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-spring-aop-第二重要"}},[a._v("#")]),a._v(" "),s("strong",[a._v("2. spring-aop（第二重要）")])]),a._v(" "),s("p",[s("strong",[a._v("事务是基于 AOP 实现的")])]),a._v(" "),s("ul",[s("li",[a._v("事务通过 AOP 代理机制实现")]),a._v(" "),s("li",[s("code",[a._v("@Transactional")]),a._v(" 依赖于 AOP 来创建代理对象")]),a._v(" "),s("li",[a._v("事务拦截器实际是一个 AOP 通知（Advice）")])]),a._v(" "),s("h3",{attrs:{id:"_3-spring-context-配置和扫描"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-spring-context-配置和扫描"}},[a._v("#")]),a._v(" "),s("strong",[a._v("3. spring-context（配置和扫描）")])]),a._v(" "),s("p",[s("strong",[a._v("负责扫描和注册事务相关组件")])]),a._v(" "),s("ul",[s("li",[a._v("注解配置驱动（"),s("code",[a._v("@EnableTransactionManagement")]),a._v("）")]),a._v(" "),s("li",[a._v("组件扫描器会识别 "),s("code",[a._v("@Transactional")])]),a._v(" "),s("li",[a._v("应用上下文负责装配事务基础设施")])]),a._v(" "),s("h2",{attrs:{id:"具体关注点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#具体关注点"}},[a._v("#")]),a._v(" "),s("strong",[a._v("具体关注点")])]),a._v(" "),s("h3",{attrs:{id:"事务配置相关类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事务配置相关类"}},[a._v("#")]),a._v(" "),s("strong",[a._v("事务配置相关类")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 主要配置类")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("annotation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("EnableTransactionManagement")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("annotation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("TransactionManagementConfigurationSelector")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 注解定义")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("annotation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("Transactional")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("h3",{attrs:{id:"事务处理类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事务处理类"}},[a._v("#")]),a._v(" "),s("strong",[a._v("事务处理类")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 核心拦截器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("interceptor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("TransactionInterceptor")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 切点匹配")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("interceptor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("TransactionAttributeSource")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("interceptor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("TransactionAttributeSourcePointcut")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 代理创建")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("annotation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("ProxyTransactionManagementConfiguration")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("h3",{attrs:{id:"事务管理器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事务管理器"}},[a._v("#")]),a._v(" "),s("strong",[a._v("事务管理器")]),a._v("：")]),a._v(" "),s("p",[a._v("java")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 主要接口")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("PlatformTransactionManager")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 具体实现")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jdbc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("datasource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("DataSourceTransactionManager")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// JDBC")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("springframework"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("orm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jpa"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("JpaTransactionManager")]),a._v("                "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// JPA")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("h2",{attrs:{id:"依赖关系图-针对事务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#依赖关系图-针对事务"}},[a._v("#")]),a._v(" "),s("strong",[a._v("依赖关系图（针对事务）")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("使用 @Transactional 注解的 Bean\n        ↓\n    AOP 代理（spring-aop）\n        ↓\nTransactionInterceptor（spring-tx）\n        ↓\nPlatformTransactionManager（spring-tx）\n        ↓\n    数据库连接/资源管理\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("h2",{attrs:{id:"学习建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#学习建议"}},[a._v("#")]),a._v(" "),s("strong",[a._v("学习建议")])]),a._v(" "),s("h3",{attrs:{id:"_1-源码阅读顺序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-源码阅读顺序"}},[a._v("#")]),a._v(" "),s("strong",[a._v("1. 源码阅读顺序")]),a._v("：")]),a._v(" "),s("ol",[s("li",[s("strong",[a._v("先看注解定义")]),a._v("："),s("code",[a._v("Transactional.java")])]),a._v(" "),s("li",[s("strong",[a._v("再看配置启用")]),a._v("："),s("code",[a._v("EnableTransactionManagement.java")])]),a._v(" "),s("li",[s("strong",[a._v("研究拦截器")]),a._v("："),s("code",[a._v("TransactionInterceptor.java")])]),a._v(" "),s("li",[s("strong",[a._v("了解代理创建")]),a._v("："),s("code",[a._v("ProxyTransactionManagementConfiguration.java")])])]),a._v(" "),s("h3",{attrs:{id:"_2-关键机制理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-关键机制理解"}},[a._v("#")]),a._v(" "),s("strong",[a._v("2. 关键机制理解")]),a._v("：")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("代理机制")]),a._v("：为什么 "),s("code",[a._v("@Transactional")]),a._v(" 在同类方法调用时不生效")]),a._v(" "),s("li",[s("strong",[a._v("事务属性传播")]),a._v("：PROPAGATION_REQUIRED, PROPAGATION_REQUIRES_NEW 等")]),a._v(" "),s("li",[s("strong",[a._v("事务同步")]),a._v("："),s("code",[a._v("TransactionSynchronizationManager")])]),a._v(" "),s("li",[s("strong",[a._v("异常回滚规则")]),a._v("：rollbackFor/noRollbackFor")])]),a._v(" "),s("h3",{attrs:{id:"_3-调试方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-调试方法"}},[a._v("#")]),a._v(" "),s("strong",[a._v("3. 调试方法")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 查看当前事务状态")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TransactionSynchronizationManager")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getCurrentTransactionName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TransactionSynchronizationManager")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("isActualTransactionActive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TransactionSynchronizationManager")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("getCurrentTransactionIsolationLevel")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h2",{attrs:{id:"常见问题关注点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题关注点"}},[a._v("#")]),a._v(" "),s("strong",[a._v("常见问题关注点")])]),a._v(" "),s("h3",{attrs:{id:"失效场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#失效场景"}},[a._v("#")]),a._v(" "),s("strong",[a._v("失效场景")]),a._v("：")]),a._v(" "),s("ol",[s("li",[s("strong",[a._v("非 public 方法")])]),a._v(" "),s("li",[s("strong",[a._v("同类内部调用")])]),a._v(" "),s("li",[s("strong",[a._v("异常被捕获未抛出")])]),a._v(" "),s("li",[s("strong",[a._v("多线程环境下")])]),a._v(" "),s("li",[s("strong",[a._v("数据库引擎不支持")]),a._v("（如 MyISAM）")])]),a._v(" "),s("h3",{attrs:{id:"配置验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置验证"}},[a._v("#")]),a._v(" "),s("strong",[a._v("配置验证")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 检查是否启用了事务管理")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Configuration")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@EnableTransactionManagement")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 必须要有")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AppConfig")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@Bean")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PlatformTransactionManager")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("transactionManager")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DataSourceTransactionManager")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("dataSource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" "),s("strong",[a._v("总结")])]),a._v(" "),s("p",[s("strong",[a._v("最优先关注："),s("code",[a._v("spring-tx")]),a._v(" 模块")]),a._v("，因为：")]),a._v(" "),s("ol",[s("li",[a._v("包含了 "),s("code",[a._v("@Transactional")]),a._v(" 注解本身")]),a._v(" "),s("li",[a._v("包含所有事务管理的核心实现")]),a._v(" "),s("li",[a._v("事务拦截器、属性源等核心类都在这里")]),a._v(" "),s("li",[a._v('是事务功能的"大脑"')])]),a._v(" "),s("p",[s("strong",[a._v("次要关注："),s("code",[a._v("spring-aop")]),a._v(" 模块")]),a._v("，因为：")]),a._v(" "),s("ol",[s("li",[a._v("事务是通过 AOP 代理实现的")]),a._v(" "),s("li",[a._v("理解代理机制有助于理解事务行为")])]),a._v(" "),s("p",[s("strong",[a._v("辅助关注："),s("code",[a._v("spring-context")]),a._v(" 模块")]),a._v("，因为：")]),a._v(" "),s("ol",[s("li",[a._v("负责事务相关组件的扫描和装配")])]),a._v(" "),s("p",[a._v("建议你先从 "),s("code",[a._v("spring-tx")]),a._v(" 源码入手，理解事务的基本流程，然后再研究它与 AOP 的集成机制。")])])}),[],!1,null,null,null);s.default=r.exports}}]);